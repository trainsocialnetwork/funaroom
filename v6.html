<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>FUN・A・ROOM - 健康で楽しい毎日を</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Hiragino Sans", "Yu Gothic", "Meiryo", sans-serif;
            background: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .phone-frame {
            width: 100%;
            max-width: 430px;
            height: 900px;
            background: #000;
            border-radius: 45px;
            padding: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            position: relative;
        }

        .screen {
            width: 100%;
            height: 100%;
            background: #ffffff;
            border-radius: 35px;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .status-bar {
            height: 48px;
            background: #ffffff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 32px;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            border-bottom: 1px solid #f0f0f0;
        }

        .page {
            display: none;
            flex-direction: column;
            height: 100%;
            background: #ffffff;
        }

        .page.active {
            display: flex;
        }

        .header {
            background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);
            color: white;
            padding: 28px;
            text-align: center;
            position: relative;
        }

        .header-small {
            padding: 20px 28px;
        }

        .header-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 4px;
            letter-spacing: 0.5px;
        }

        .header-subtitle {
            font-size: 18px;
            opacity: 0.95;
            font-weight: 400;
        }

        .content {
            flex: 1;
            padding: 24px 20px;
            overflow-y: auto;
            background: #fafafa;
        }

        .content::-webkit-scrollbar {
            width: 0;
        }

        /* メインメニューカード */
        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 24px;
        }

        .menu-card {
            background: white;
            border-radius: 20px;
            padding: 28px 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .menu-card:active {
            transform: scale(0.97);
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
        }

        .menu-card.primary {
            grid-column: span 2;
            background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);
            color: white;
        }

        .menu-card.success {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
        }

        .menu-card.warning {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
            color: white;
        }

        .menu-card i {
            font-size: 36px;
        }

        .menu-card-title {
            font-size: 20px;
            font-weight: 600;
        }

        .menu-card-text {
            font-size: 14px;
            opacity: 0.9;
        }

        /* ステータスカード */
        .status-card {
            background: white;
            border-radius: 24px;
            padding: 28px;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            text-align: center;
        }

        .status-number {
            font-size: 56px;
            font-weight: 700;
            color: #4A90E2;
            margin-bottom: 4px;
        }

        .status-label {
            font-size: 18px;
            color: #666;
            font-weight: 500;
        }

        /* ボタン */
        .main-button {
            background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 24px;
            font-size: 20px;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.25);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            min-height: 72px;
        }

        .main-button:active {
            transform: scale(0.98);
            box-shadow: 0 3px 10px rgba(74, 144, 226, 0.25);
        }

        .main-button i {
            font-size: 24px;
        }

        .secondary-button {
            background: white;
            color: #4A90E2;
            border: 2px solid #4A90E2;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .success-button {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.25);
        }

        .back-button {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            padding: 14px 20px;
            font-size: 16px;
            color: #666;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            transition: all 0.2s;
            margin-bottom: 16px;
        }

        .back-button:active {
            background: #f5f5f5;
            transform: scale(0.98);
        }

        /* 質問画面 */
        .question-container {
            padding: 24px 20px;
            background: white;
        }

        .progress-bar {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin-bottom: 28px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4A90E2 0%, #5CA0F2 100%);
            transition: width 0.3s;
            border-radius: 5px;
        }

        .question-number {
            display: inline-block;
            background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 700;
            margin: 0 auto 20px;
        }

        .question-text {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            text-align: center;
            margin-bottom: 32px;
            line-height: 1.4;
        }

        .option-button {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 12px;
            font-size: 18px;
            color: #333;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            width: 100%;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            min-height: 64px;
        }

        .option-button:active {
            transform: scale(0.98);
        }

        .option-button.selected {
            background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);
            border-color: #4A90E2;
            color: white;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
        }

        .option-button i {
            font-size: 24px;
        }

        /* 完了画面 */
        .complete-container {
            padding: 48px 32px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            background: white;
        }

        .complete-icon {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: white;
            margin: 0 auto 28px;
            box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3);
        }

        .complete-title {
            font-size: 28px;
            font-weight: 700;
            color: #333;
            margin-bottom: 12px;
        }

        .complete-text {
            font-size: 18px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 32px;
        }

        /* ゲーム画面 */
        .game-card {
            background: white;
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .game-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: white;
            margin: 0 auto 20px;
        }

        .game-title {
            font-size: 22px;
            font-weight: 600;
            text-align: center;
            color: #333;
            margin-bottom: 12px;
        }

        .game-description {
            font-size: 16px;
            color: #666;
            text-align: center;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .test-area {
            background: #f5f5f5;
            border-radius: 16px;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 20px;
            min-height: 160px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .test-result {
            font-size: 48px;
            font-weight: 700;
            color: #4A90E2;
            margin-bottom: 8px;
        }

        .test-label {
            font-size: 18px;
            color: #666;
            font-weight: 500;
        }

        /* 活動カード */
        .activity-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.2s;
        }

        .activity-card:active {
            transform: scale(0.98);
        }

        .activity-image {
            width: 100%;
            height: 160px;
            background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);
            background-image: url('https://static.wixstatic.com/media/07cdbc_ffa8f4d3caa343ad96d08d1e33a3d943~mv2.jpg/v1/fill/w_828,h_624,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2782_JPG.jpg');
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .activity-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);
            padding: 16px;
            color: white;
        }

        .activity-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
        }

        .activity-content {
            padding: 20px;
        }

        .activity-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
        }

        .activity-info {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            color: #666;
            margin-bottom: 8px;
        }

        .activity-info i {
            color: #4A90E2;
            width: 20px;
        }

        /* カテゴリータブ */
        .category-tab {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 10px 18px;
            font-size: 16px;
            color: #666;
            cursor: pointer;
            white-space: nowrap;
            font-weight: 500;
            transition: all 0.2s;
        }

        .category-tab.active {
            background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);
            border-color: #4A90E2;
            color: white;
            font-weight: 600;
        }

        /* 詳細画面 */
        .detail-image {
            width: 100%;
            height: 240px;
            background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);
            background-image: url('https://static.wixstatic.com/media/07cdbc_ffa8f4d3caa343ad96d08d1e33a3d943~mv2.jpg/v1/fill/w_828,h_624,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2782_JPG.jpg');
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .detail-back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
            border: none;
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            z-index: 10;
        }

        .detail-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 100%);
            padding: 24px;
            color: white;
        }

        .detail-title {
            font-size: 26px;
            font-weight: 700;
            margin-top: 8px;
        }

        /* タブ */
        .detail-tabs {
            display: flex;
            background: white;
            border-bottom: 1px solid #f0f0f0;
            padding: 0;
        }

        .detail-tab {
            flex: 1;
            background: none;
            border: none;
            padding: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 16px;
            color: #999;
            font-weight: 500;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
        }

        .detail-tab.active {
            color: #4A90E2;
            font-weight: 600;
            border-bottom-color: #4A90E2;
        }

        .detail-tab i {
            font-size: 18px;
        }

        .tab-content {
            display: none;
            min-height: 400px;
        }

        .tab-content.active {
            display: block;
        }

        /* 詳細情報 */
        .detail-info-card {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
        }

        .detail-info-row {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .detail-info-row:last-child {
            border-bottom: none;
        }

        .detail-info-row i {
            color: #4A90E2;
            font-size: 20px;
            width: 24px;
            margin-top: 2px;
        }

        .detail-info-row .info-label {
            display: block;
            font-size: 14px;
            color: #999;
            margin-bottom: 4px;
        }

        .detail-info-row .info-value {
            display: block;
            font-size: 16px;
            color: #333;
            font-weight: 600;
        }

        .detail-description {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
        }

        /* 活動報告カード */
        .report-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
        }

        .report-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 16px;
            display: block;
        }

        .report-header {
            margin-bottom: 16px;
        }

        .report-meta {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .report-author {
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }

        .report-date {
            font-size: 14px;
            color: #999;
        }

        .report-content {
            font-size: 16px;
            line-height: 1.6;
            color: #666;
            margin-bottom: 16px;
        }

        .report-stats {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #999;
        }

        .report-stats span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .report-stats i {
            color: #FF6B6B;
        }

        /* サポートカード */
        .support-card {
            background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
            border: 2px solid #F59E0B;
            border-radius: 20px;
            padding: 28px;
            margin: 24px 0;
            text-align: center;
        }

        .support-icon {
            font-size: 40px;
            color: #F59E0B;
            margin-bottom: 12px;
        }

        .support-title {
            font-size: 20px;
            font-weight: 600;
            color: #92400E;
            margin-bottom: 8px;
        }

        .support-text {
            font-size: 16px;
            color: #78350F;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .phone-button {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            border: none;
            border-radius: 16px;
            padding: 18px 24px;
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .phone-button:active {
            transform: scale(0.98);
        }

        /* 結果表示 */
        .result-section {
            background: white;
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .result-badge {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: white;
        }

        .result-badge.good {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
        }

        .result-badge.warning {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
        }

        .result-badge.caution {
            background: linear-gradient(135deg, #EF4444 0%, #B91C1C 100%);
        }

        .result-title {
            font-size: 24px;
            font-weight: 700;
            color: #333;
            text-align: center;
            margin-bottom: 12px;
        }

        .result-text {
            font-size: 16px;
            color: #666;
            line-height: 1.6;
            text-align: center;
            margin-bottom: 24px;
        }

        .result-item {
            padding: 16px;
            border-radius: 12px;
            background: #f8f9fa;
            margin-bottom: 12px;
        }

        .result-category {
            font-size: 14px;
            font-weight: 600;
            color: #4A90E2;
            margin-bottom: 4px;
        }

        .result-advice {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
        }

        /* ナビゲーション */
        .bottom-nav {
            background: white;
            border-top: 2px solid #f0f0f0;
            display: flex;
            padding: 12px 8px 20px;
            gap: 8px;
        }

        .nav-button {
            flex: 1;
            background: white;
            border: none;
            border-radius: 12px;
            padding: 10px 6px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .nav-button:active {
            background: #f5f5f5;
            transform: scale(0.95);
        }

        .nav-button.active {
            background: #EBF5FF;
        }

        .nav-button i {
            font-size: 24px;
            color: #999;
        }

        .nav-button.active i {
            color: #4A90E2;
        }

        .nav-button span {
            font-size: 13px;
            color: #999;
            font-weight: 500;
        }

        .nav-button.active span {
            color: #4A90E2;
            font-weight: 600;
        }

        @media (max-width: 450px) {
            .phone-frame {
                border-radius: 0;
                padding: 0;
                height: 100vh;
                max-width: 100%;
            }
            
            .screen {
                border-radius: 0;
            }
        }
    </style>
</head>
<body>
    <div class="phone-frame">
        <div class="screen">
            <div class="status-bar">
                <span>9:41</span>
                <span>100% <i class="fas fa-battery-full"></i></span>
            </div>

            <!-- ホーム画面 -->
            <div id="home" class="page active">
                <div class="header">
                    <h1 class="header-title">おはようございます</h1>
                    <p class="header-subtitle">田中さん、今日も元気に過ごしましょう</p>
                </div>
                
                <div class="content">
                    <div class="status-card">
                        <div class="status-number">7日</div>
                        <div class="status-label">連続で記録しています</div>
                    </div>

                    <div class="menu-grid">
                        <div class="menu-card primary" onclick="showPage('daily-health-tasks')">
                            <i class="fas fa-heart-pulse"></i>
                            <div class="menu-card-title">今日の健康習慣</div>
                            <div class="menu-card-text">毎日のタスク</div>
                        </div>

                        <div class="menu-card warning" onclick="checkBiweeklyHealth()">
                            <i class="fas fa-stethoscope"></i>
                            <div class="menu-card-title">2週間健康診断</div>
                            <div class="menu-card-text" id="biweekly-status">詳しくチェック</div>
                        </div>
                    </div>

                    <button class="main-button secondary-button" onclick="showPage('activities')">
                        <i class="fas fa-users"></i>
                        <span>部活動を見る</span>
                    </button>

                    <div class="support-card">
                        <div class="support-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <h3 class="support-title">お困りですか？</h3>
                        <p class="support-text">
                            使い方がわからない時は<br>
                            お電話ください
                        </p>
                        <button class="phone-button" onclick="alert('電話：0982-XX-XXXX')">
                            <i class="fas fa-phone"></i>
                            <span>電話をかける</span>
                        </button>
                    </div>
                </div>

                <div class="bottom-nav">
                    <button class="nav-button active" onclick="setActiveTab('home')">
                        <i class="fas fa-home"></i>
                        <span>ホーム</span>
                    </button>
                    <button class="nav-button" onclick="setActiveTab('records')">
                        <i class="fas fa-calendar"></i>
                        <span>記録</span>
                    </button>
                    <button class="nav-button" onclick="setActiveTab('activities')">
                        <i class="fas fa-users"></i>
                        <span>部活</span>
                    </button>
                </div>
            </div>

            <!-- 毎日の健康タスク画面 -->
            <div id="daily-health-tasks" class="page">
                <div class="header">
                    <h1 class="header-title">今日の健康習慣</h1>
                    <p class="header-subtitle">毎日続けて健康に</p>
                </div>

                <div class="content">
                    <h2 style="font-size: 20px; font-weight: 600; margin-bottom: 16px; color: #1f2937;">これをやろう</h2>

                    <!-- 問診カード（18時以降のみ表示） -->
                    <div id="daily-interview-card" class="game-card" style="display: none;">
                        <div class="game-icon" style="background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);">
                            <i class="fas fa-clipboard-check"></i>
                        </div>
                        <h3 class="game-title">今日の問診</h3>
                        <p class="game-description">
                            簡単3つの質問<br>
                            体調を記録しましょう
                        </p>
                        <div id="daily-interview-status" style="margin-top: 12px; padding: 8px; background: #f3f4f6; border-radius: 8px; font-size: 14px; color: #6b7280;">
                            本日の問診は完了しています
                        </div>
                        <button class="main-button" onclick="startDailyInterview()">
                            問診を始める
                        </button>
                    </div>

                    <!-- かんたん運動カード -->
                    <div class="game-card">
                        <div class="game-icon" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);">
                            <i class="fas fa-running"></i>
                        </div>
                        <h3 class="game-title">かんたん運動</h3>
                        <p class="game-description">
                            簡単にできる運動で<br>
                            体を動かしましょう
                        </p>
                        <button class="main-button" onclick="showPage('simple-exercise-menu')">
                            運動を選ぶ
                        </button>
                    </div>

                    <div class="support-card">
                        <div class="support-icon">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <h3 class="support-title">毎日続けることが大切</h3>
                        <p class="support-text">
                            無理せず、楽しく<br>
                            健康習慣を続けましょう
                        </p>
                    </div>

                    <button class="back-button" onclick="showPage('home')">
                        <i class="fas fa-arrow-left"></i> ホームに戻る
                    </button>
                </div>
            </div>

            <!-- 毎日の健康チェック 質問1 -->
            <div id="daily-check-1" class="page">
                <div class="header header-small">
                    <h1 class="header-title" style="font-size: 24px;">今日の健康記録</h1>
                </div>
                
                <div class="question-container">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 33%"></div>
                    </div>
                    
                    <div class="question-number">1</div>
                    <h2 class="question-text">今日の体調は<br>いかがですか？</h2>
                    
                    <button class="option-button" onclick="selectDailyOption(this, 'daily-1')">
                        <i class="fas fa-smile"></i>
                        <span>とても良い</span>
                    </button>
                    <button class="option-button" onclick="selectDailyOption(this, 'daily-1')">
                        <i class="fas fa-meh"></i>
                        <span>ふつう</span>
                    </button>
                    <button class="option-button" onclick="selectDailyOption(this, 'daily-1')">
                        <i class="fas fa-frown"></i>
                        <span>良くない</span>
                    </button>

                    <div style="margin-top: 32px;">
                        <button class="main-button" onclick="nextDailyQuestion('daily-1', 'daily-check-2')">
                            次へ
                        </button>
                        <button class="back-button" onclick="showPage('home')">
                            <i class="fas fa-arrow-left"></i> ホームに戻る
                        </button>
                    </div>
                </div>
            </div>

            <!-- 毎日の健康チェック 質問2 -->
            <div id="daily-check-2" class="page">
                <div class="header header-small">
                    <h1 class="header-title" style="font-size: 24px;">今日の健康記録</h1>
                </div>
                
                <div class="question-container">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 66%"></div>
                    </div>
                    
                    <div class="question-number">2</div>
                    <h2 class="question-text">今日は<br>歩きましたか？</h2>
                    
                    <button class="option-button" onclick="selectDailyOption(this, 'daily-2')">
                        <i class="fas fa-walking"></i>
                        <span>たくさん歩いた</span>
                    </button>
                    <button class="option-button" onclick="selectDailyOption(this, 'daily-2')">
                        <i class="fas fa-shoe-prints"></i>
                        <span>少し歩いた</span>
                    </button>
                    <button class="option-button" onclick="selectDailyOption(this, 'daily-2')">
                        <i class="fas fa-home"></i>
                        <span>あまり歩いていない</span>
                    </button>

                    <div style="margin-top: 32px;">
                        <button class="main-button" onclick="nextDailyQuestion('daily-2', 'daily-check-3')">
                            次へ
                        </button>
                        <button class="back-button" onclick="showPage('daily-check-1')">
                            <i class="fas fa-arrow-left"></i> 戻る
                        </button>
                    </div>
                </div>
            </div>

            <!-- 毎日の健康チェック 質問3 -->
            <div id="daily-check-3" class="page">
                <div class="header header-small">
                    <h1 class="header-title" style="font-size: 24px;">今日の健康記録</h1>
                </div>
                
                <div class="question-container">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%"></div>
                    </div>
                    
                    <div class="question-number">3</div>
                    <h2 class="question-text">今日は誰かと<br>話しましたか？</h2>
                    
                    <button class="option-button" onclick="selectDailyOption(this, 'daily-3')">
                        <i class="fas fa-comments"></i>
                        <span>たくさん話した</span>
                    </button>
                    <button class="option-button" onclick="selectDailyOption(this, 'daily-3')">
                        <i class="fas fa-comment"></i>
                        <span>少し話した</span>
                    </button>
                    <button class="option-button" onclick="selectDailyOption(this, 'daily-3')">
                        <i class="fas fa-comment-slash"></i>
                        <span>話していない</span>
                    </button>

                    <div style="margin-top: 32px;">
                        <button class="main-button success-button" onclick="completeDailyCheck()">
                            記録を完了
                        </button>
                        <button class="back-button" onclick="showPage('daily-check-2')">
                            <i class="fas fa-arrow-left"></i> 戻る
                        </button>
                    </div>
                </div>
            </div>

            <!-- 毎日のチェック完了 -->
            <div id="daily-complete" class="page">
                <div class="complete-container">
                    <div class="complete-icon">
                        <i class="fas fa-check"></i>
                    </div>
                    <h2 class="complete-title">記録完了！</h2>
                    <p class="complete-text">
                        お疲れさまでした<br>
                        明日も記録しましょう
                    </p>
                    
                    <button class="main-button" onclick="showPage('home')">
                        ホームに戻る
                    </button>
                </div>
            </div>

            <!-- かんたん運動メニュー -->
            <div id="simple-exercise-menu" class="page">
                <div class="header">
                    <h1 class="header-title">かんたん運動</h1>
                    <p class="header-subtitle">好きな運動を選んでください</p>
                </div>

                <div class="content">
                    <div class="game-card">
                        <div class="game-icon" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);">
                            <i class="fas fa-walking"></i>
                        </div>
                        <h3 class="game-title">その場足踏み</h3>
                        <p class="game-description">
                            立った状態で<br>
                            その場で足踏み運動<br>
                            所要時間：3分
                        </p>
                        <button class="main-button" onclick="startExercise('marching')">
                            始める
                        </button>
                    </div>

                    <div class="game-card">
                        <div class="game-icon" style="background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);">
                            <i class="fas fa-dumbbell"></i>
                        </div>
                        <h3 class="game-title">ラジオ体操</h3>
                        <p class="game-description">
                            なじみのあるラジオ体操で<br>
                            全身を動かしましょう<br>
                            所要時間：5分
                        </p>
                        <button class="main-button" onclick="startExercise('radio-taiso')">
                            始める
                        </button>
                    </div>

                    <div class="game-card">
                        <div class="game-icon" style="background: linear-gradient(135deg, #EC4899 0%, #DB2777 100%);">
                            <i class="fas fa-hands"></i>
                        </div>
                        <h3 class="game-title">かんたんストレッチ</h3>
                        <p class="game-description">
                            座ったままできる<br>
                            簡単なストレッチ<br>
                            所要時間：3分
                        </p>
                        <button class="main-button" onclick="startExercise('stretch')">
                            始める
                        </button>
                    </div>

                    <div class="game-card">
                        <div class="game-icon" style="background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <h3 class="game-title">深呼吸</h3>
                        <p class="game-description">
                            ゆっくりとした深呼吸で<br>
                            リラックス<br>
                            所要時間：2分
                        </p>
                        <button class="main-button" onclick="startExercise('breathing')">
                            始める
                        </button>
                    </div>

                    <button class="back-button" onclick="showPage('daily-health-tasks')">
                        <i class="fas fa-arrow-left"></i> 戻る
                    </button>
                </div>
            </div>

            <!-- ゲームメニュー -->
            <div id="game-menu" class="page">
                <div class="header header-small">
                    <h1 class="header-title" style="font-size: 24px;">健康ゲーム</h1>
                    <p class="header-subtitle">楽しく体力チェック</p>
                </div>
                
                <div class="content">
                    <div class="game-card">
                        <div class="game-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <h3 class="game-title">片足立ちチャレンジ</h3>
                        <p class="game-description">
                            バランス感覚を測定<br>
                            何秒立っていられるかな？
                        </p>
                        <button class="main-button" onclick="showPage('balance-game')">
                            挑戦する
                        </button>
                    </div>

                    <div class="game-card">
                        <div class="game-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h3 class="game-title">反応速度テスト</h3>
                        <p class="game-description">
                            色が変わったらタップ！<br>
                            反射神経を測定します
                        </p>
                        <button class="main-button" onclick="showPage('reaction-game')">
                            挑戦する
                        </button>
                    </div>

                    <div class="game-card">
                        <div class="game-icon" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);">
                            <i class="fas fa-hand-paper"></i>
                        </div>
                        <h3 class="game-title">指輪っかテスト</h3>
                        <p class="game-description">
                            親指と人差し指で<br>
                            ふくらはぎをチェック
                        </p>
                        <button class="main-button" onclick="openFingerRingTest('game-menu')">
                            チェックする
                        </button>
                    </div>

                    <div class="game-card">
                        <div class="game-icon" style="background: linear-gradient(135deg, #F472B6 0%, #EC4899 100%);">
                            <i class="fas fa-smile"></i>
                        </div>
                        <h3 class="game-title">口腔フレイルチェック</h3>
                        <p class="game-description">
                            お口の機能の変化を<br>
                            簡単に確認しましょう
                        </p>
                        <button class="main-button" onclick="startOralCheck('game-menu')">
                            診断を始める
                        </button>
                    </div>

                    <button class="back-button" onclick="showPage('home')">
                        <i class="fas fa-arrow-left"></i> ホームに戻る
                    </button>
                </div>
            </div>

            <!-- 片足立ちゲーム -->
            <div id="balance-game" class="page">
                <div class="header header-small">
                    <h1 class="header-title" style="font-size: 24px;">片足立ちチャレンジ</h1>
                </div>
                
                <div class="content">
                    <div class="game-card">
                        <p class="game-description" style="font-size: 18px; margin-bottom: 24px;">
                            <i class="fas fa-info-circle" style="color: #4A90E2;"></i>
                            壁や椅子の近くで安全に行いましょう
                        </p>
                        
                        <div class="test-area">
                            <div class="test-result" id="balance-time">0.0秒</div>
                            <div class="test-label" id="balance-label">ボタンを長押し</div>
                        </div>

                        <button class="main-button success-button" 
                                id="balance-button"
                                onmousedown="startBalance()" 
                                onmouseup="stopBalance()" 
                                ontouchstart="startBalance()" 
                                ontouchend="stopBalance()">
                            <i class="fas fa-play"></i>
                            <span>長押しで計測</span>
                        </button>
                    </div>

                    <button class="back-button" onclick="showPage('game-menu')">
                        <i class="fas fa-arrow-left"></i> ゲームメニューに戻る
                    </button>
                </div>
            </div>

            <!-- 反応速度ゲーム -->
            <div id="reaction-game" class="page">
                <div class="header header-small">
                    <h1 class="header-title" style="font-size: 24px;">反応速度テスト</h1>
                </div>
                
                <div class="content">
                    <div class="game-card">
                        <p class="game-description" style="font-size: 18px; margin-bottom: 24px;">
                            画面が緑になったらタップ！
                        </p>
                        
                        <div class="test-area" id="reaction-area" style="background: #e0e0e0; cursor: pointer; min-height: 200px;" onclick="reactionClick()">
                            <div id="reaction-message" style="font-size: 20px; font-weight: 600; color: #666;">
                                スタートを押してください
                            </div>
                        </div>

                        <button class="main-button" id="reaction-start" onclick="startReaction()">
                            <i class="fas fa-play"></i>
                            <span>スタート</span>
                        </button>
                    </div>

                    <button class="back-button" onclick="showPage('game-menu')">
                        <i class="fas fa-arrow-left"></i> ゲームメニューに戻る
                    </button>
                </div>
            </div>

            <!-- 運動実行画面 -->
            <div id="exercise-screen" class="page">
                <div class="header header-small">
                    <h1 class="header-title" style="font-size: 24px;" id="exercise-title">運動中</h1>
                </div>

                <div class="content">
                    <div class="game-card">
                        <div id="exercise-instructions" style="font-size: 18px; line-height: 1.8; color: #374151; margin-bottom: 24px;">
                            <!-- 運動の説明がここに入ります -->
                        </div>

                        <div id="exercise-timer" style="text-align: center; margin: 32px 0;">
                            <div style="font-size: 64px; font-weight: 700; color: #4A90E2;" id="timer-display">3:00</div>
                            <div style="font-size: 18px; color: #6b7280; margin-top: 8px;">残り時間</div>
                        </div>

                        <div id="exercise-controls">
                            <button class="main-button success-button" id="exercise-start-btn" onclick="startExerciseTimer()">
                                <i class="fas fa-play"></i>
                                <span>スタート</span>
                            </button>
                            <button class="main-button" id="exercise-pause-btn" onclick="pauseExerciseTimer()" style="display: none; background: #F59E0B;">
                                <i class="fas fa-pause"></i>
                                <span>一時停止</span>
                            </button>
                            <button class="main-button success-button" id="exercise-resume-btn" onclick="resumeExerciseTimer()" style="display: none;">
                                <i class="fas fa-play"></i>
                                <span>再開</span>
                            </button>
                        </div>
                    </div>

                    <button class="back-button" onclick="showPage('simple-exercise-menu')">
                        <i class="fas fa-arrow-left"></i> メニューに戻る
                    </button>
                </div>
            </div>

            <!-- 運動完了画面 -->
            <div id="exercise-complete" class="page">
                <div class="complete-container">
                    <div class="complete-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h2 class="complete-title">お疲れさまでした！</h2>
                    <p class="complete-text" id="exercise-complete-message">
                        運動を完了しました<br>
                        素晴らしいです！
                    </p>

                    <button class="main-button" onclick="showPage('simple-exercise-menu')">
                        他の運動を見る
                    </button>
                    <button class="back-button" onclick="showPage('daily-health-tasks')">
                        <i class="fas fa-arrow-left"></i> 健康習慣に戻る
                    </button>
                </div>
            </div>

            <!-- 2週間健康診断 -->
            <div id="biweekly-checkup-intro" class="page">
                <div class="header">
                    <h1 class="header-title">2週間健康診断</h1>
                    <p class="header-subtitle">詳しく健康状態をチェック</p>
                </div>

                <div class="content">
                    <!-- 次回診断日の表示（診断不可の場合） -->
                    <div id="biweekly-not-available" style="display: none;">
                        <div class="support-card" style="background: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%);">
                            <div class="support-icon" style="background: linear-gradient(135deg, #6B7280 0%, #4B5563 100%);">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <h3 class="support-title" style="font-size: 24px; color: #1f2937;">次回診断日</h3>
                            <p class="support-text" style="font-size: 32px; font-weight: 700; color: #4A90E2; margin: 16px 0;" id="next-checkup-date">
                                ○月○日
                            </p>
                            <p class="support-text" style="color: #6b7280;">
                                前回から2週間後に<br>
                                次の診断ができます
                            </p>
                        </div>

                        <button class="back-button" onclick="showPage('home')">
                            <i class="fas fa-arrow-left"></i> ホームに戻る
                        </button>
                    </div>

                    <!-- 診断可能な場合 -->
                    <div id="biweekly-available">
                        <div class="game-card">
                            <div class="game-icon" style="background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);">
                                <i class="fas fa-clipboard-list"></i>
                            </div>
                            <h3 class="game-title">問診</h3>
                            <p class="game-description">
                                5つの質問で<br>
                                健康リスクを確認します<br><br>
                                所要時間：約3分
                            </p>
                            <button class="main-button" onclick="showPage('health-check-1')">
                                診断を開始
                            </button>
                        </div>

                        <div class="game-card">
                            <div class="game-icon" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <h3 class="game-title">健康チェック（ゲーム）</h3>
                            <p class="game-description">
                                楽しく体力測定<br>
                                バランス感覚や反応速度をチェック
                            </p>
                            <button class="main-button" onclick="showPage('game-menu')">
                                ゲームを見る
                            </button>
                        </div>

                        <div class="support-card">
                            <div class="support-icon">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <h3 class="support-title">2週間に1回がおすすめ</h3>
                            <p class="support-text">
                                定期的にチェックすることで<br>
                                健康状態の変化がわかります
                            </p>
                        </div>

                        <button class="back-button" onclick="showPage('home')">
                            <i class="fas fa-arrow-left"></i> ホームに戻る
                        </button>
                    </div>
                </div>
            </div>

            <!-- 指輪っかテスト -->
            <div id="finger-ring-test" class="page">
                <div class="header header-small">
                    <h1 class="header-title" style="font-size: 24px;">指輪っかテスト</h1>
                </div>

                <div class="content">
                    <div class="game-card">
                        <h3 class="game-title">チェック方法</h3>
                        <p class="game-description">
                            両手の親指と人差し指で輪を作り、ふくらはぎの一番太いところを囲みます。<br><br>
                            きつさやすき間を確認して、筋肉量の目安にしましょう。
                        </p>
                    </div>

                    <div class="game-card">
                        <h3 class="game-title">結果を選んでください</h3>
                        <div id="finger-ring-options" style="display: flex; flex-direction: column; gap: 12px; margin-top: 16px;">
                            <button class="option-button" onclick="handleFingerRing('tight', this)">
                                <span>指が届かず輪が閉じない</span>
                            </button>
                            <button class="option-button" onclick="handleFingerRing('fit', this)">
                                <span>ちょうどふくらはぎに触れる</span>
                            </button>
                            <button class="option-button" onclick="handleFingerRing('loose', this)">
                                <span>輪が余ってすき間ができる</span>
                            </button>
                        </div>

                        <div id="finger-ring-result" class="result-section" style="display: none; margin-top: 20px;">
                            <div id="finger-ring-badge" class="result-badge good">
                                <i class="fas fa-check"></i>
                            </div>
                            <div id="finger-ring-title" class="result-title">結果を表示します</div>
                            <div id="finger-ring-text" class="result-text">選択すると結果が表示されます。</div>
                        </div>
                    </div>

                    <button class="back-button" onclick="backFromFingerRing()">
                        <i class="fas fa-arrow-left"></i> 戻る
                    </button>
                </div>
            </div>

            <!-- 口腔フレイルチェック -->
            <div id="oral-check-1" class="page">
                <div class="header header-small">
                    <h1 class="header-title" style="font-size: 24px;">口腔フレイルチェック</h1>
                </div>

                <div class="question-container">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 20%"></div>
                    </div>

                    <div class="question-number">1</div>
                    <h2 class="question-text">硬いものが<br>食べにくくなりましたか？</h2>

                    <button class="option-button" data-value="1" onclick="selectOralOption(this, 'oral-1', 1)">
                        <span>はい</span>
                    </button>
                    <button class="option-button" data-value="0" onclick="selectOralOption(this, 'oral-1', 0)">
                        <span>いいえ</span>
                    </button>

                    <div style="margin-top: 32px;">
                        <button class="main-button" onclick="nextOralQuestion(1)">
                            次へ
                        </button>
                        <button class="back-button" onclick="showPage('health-check-intro')">
                            <i class="fas fa-arrow-left"></i> 戻る
                        </button>
                    </div>
                </div>
            </div>

            <div id="oral-result" class="page">
                <div class="header header-small">
                    <h1 class="header-title" style="font-size: 24px;">口腔フレイルチェック</h1>
                </div>

                <div class="content">
                    <div class="result-section">
                        <div id="oral-result-badge" class="result-badge good">
                            <i class="fas fa-check"></i>
                        </div>
                        <div id="oral-result-title" class="result-title">結果を表示します</div>
                        <div id="oral-result-text" class="result-text">チェックが終わると結果が表示されます。</div>
                        <div id="oral-advice-list"></div>
                    </div>

                    <button class="main-button success-button" onclick="startOralCheck()">
                        もう一度チェック
                    </button>
                    <button class="back-button" onclick="showPage('health-check-intro')">
                        <i class="fas fa-arrow-left"></i> 戻る
                    </button>
                </div>
            </div>

            <!-- 詳細健康チェック（5問） -->
            <div id="health-check-1" class="page">
                <div class="header header-small">
                    <h1 class="header-title" style="font-size: 24px;">健康診断</h1>
                </div>
                
                <div class="question-container">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 20%"></div>
                    </div>
                    
                    <div class="question-number">1</div>
                    <h2 class="question-text">最近、体重が<br>減りましたか？</h2>
                    
                    <button class="option-button" onclick="selectHealthOption(this, 'health-1')">
                        <span>3kg以上減った</span>
                    </button>
                    <button class="option-button" onclick="selectHealthOption(this, 'health-1')">
                        <span>少し減った</span>
                    </button>
                    <button class="option-button" onclick="selectHealthOption(this, 'health-1')">
                        <span>変わらない</span>
                    </button>

                    <div style="margin-top: 32px;">
                        <button class="main-button" onclick="nextHealthQuestion(1)">
                            次へ
                        </button>
                        <button class="back-button" onclick="showPage('health-check-intro')">
                            <i class="fas fa-arrow-left"></i> 戻る
                        </button>
                    </div>
                </div>
            </div>

            <!-- 健康チェック結果 -->
            <div id="health-result" class="page">
                <div class="header header-small">
                    <h1 class="header-title" style="font-size: 24px;">診断結果</h1>
                </div>
                
                <div class="content">
                    <div class="result-section">
                        <div class="result-badge good" id="result-badge">
                            <i class="fas fa-check"></i>
                        </div>
                        <h2 class="result-title" id="result-title">健康状態：良好</h2>
                        <p class="result-text" id="result-text">
                            大きな問題は見られません。<br>
                            この調子で健康管理を続けましょう。
                        </p>
                    </div>

                    <div class="result-section">
                        <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 16px;">
                            <i class="fas fa-lightbulb" style="color: #4A90E2;"></i> アドバイス
                        </h3>
                        <div id="advice-list"></div>
                    </div>

                    <button class="main-button" onclick="showPage('home')">
                        ホームに戻る
                    </button>
                </div>
            </div>

            <!-- 記録画面 -->
            <div id="records" class="page">
                <div class="header">
                    <h1 class="header-title">健康記録</h1>
                    <p class="header-subtitle">田中さんの記録</p>
                </div>
                
                <div class="content">
                    <div class="status-card" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%); color: white;">
                        <div class="status-number" style="color: white;">21日</div>
                        <div class="status-label" style="color: white;">今月の記録日数</div>
                    </div>

                    <div class="result-section">
                        <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 12px;">最新の記録</h3>
                        <div style="font-size: 16px; line-height: 1.8;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span>片足立ち</span>
                                <span style="font-weight: 600; color: #4A90E2;">32.5秒</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span>反応速度</span>
                                <span style="font-weight: 600; color: #4A90E2;">0.42秒</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>健康診断</span>
                                <span style="font-weight: 600; color: #10B981;">良好</span>
                            </div>
                        </div>
                    </div>

                    <button class="main-button" onclick="showPage('daily-check-1')">
                        <i class="fas fa-plus"></i>
                        <span>今日の記録をする</span>
                    </button>
                </div>

                <div class="bottom-nav">
                    <button class="nav-button" onclick="setActiveTab('home')">
                        <i class="fas fa-home"></i>
                        <span>ホーム</span>
                    </button>
                    <button class="nav-button active" onclick="setActiveTab('records')">
                        <i class="fas fa-calendar"></i>
                        <span>記録</span>
                    </button>
                    <button class="nav-button" onclick="setActiveTab('activities')">
                        <i class="fas fa-users"></i>
                        <span>部活</span>
                    </button>
                </div>
            </div>

            <!-- 部活動一覧画面 -->
            <div id="activities" class="page">
                <div class="header">
                    <h1 class="header-title">部活動</h1>
                    <p class="header-subtitle">仲間と楽しく健康づくり</p>
                </div>
                
                <div class="content">
                    <!-- カテゴリータブ -->
                    <div style="display: flex; gap: 8px; margin-bottom: 20px; overflow-x: auto;">
                        <button class="category-tab active" onclick="filterCategory(this, 'all')">すべて</button>
                        <button class="category-tab" onclick="filterCategory(this, 'exercise')">運動系</button>
                        <button class="category-tab" onclick="filterCategory(this, 'culture')">文化系</button>
                        <button class="category-tab" onclick="filterCategory(this, 'social')">交流系</button>
                    </div>

                    <!-- 部活動カード -->
                    <div class="activity-card" onclick="showActivityDetail('walking')" data-category="exercise">
                        <div class="activity-image">
                            <div class="activity-overlay">
                                <span class="activity-badge">運動系</span>
                            </div>
                        </div>
                        <div class="activity-content">
                            <h3 class="activity-title">朝の健康ウォーキング部</h3>
                            <div class="activity-info">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>日向市中央公園</span>
                            </div>
                            <div class="activity-info">
                                <i class="fas fa-clock"></i>
                                <span>毎週火・木 朝7:00</span>
                            </div>
                            <div class="activity-info">
                                <i class="fas fa-users"></i>
                                <span>12名が参加中</span>
                            </div>
                        </div>
                    </div>

                    <div class="activity-card" onclick="showActivityDetail('yoga')" data-category="exercise">
                        <div class="activity-image" style="background-image: url('https://static.wixstatic.com/media/07cdbc_82a0984731614afdb20bb2b581c55d5d~mv2_d_3000_2000_s_2.jpg/v1/fill/w_562,h_374,al_c,q_80,usm_0.66_1.00_0.01/07cdbc_82a0984731614afdb20bb2b581c55d5d~mv2_d_3000_2000_s_2.jpg');">
                            <div class="activity-overlay">
                                <span class="activity-badge">運動系</span>
                            </div>
                        </div>
                        <div class="activity-content">
                            <h3 class="activity-title">ゆったりヨガ教室</h3>
                            <div class="activity-info">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>FUN・A・ROOMスタジオ</span>
                            </div>
                            <div class="activity-info">
                                <i class="fas fa-clock"></i>
                                <span>毎週月・金 10:00</span>
                            </div>
                            <div class="activity-info">
                                <i class="fas fa-users"></i>
                                <span>15名が参加中</span>
                            </div>
                        </div>
                    </div>

                    <div class="activity-card" onclick="showActivityDetail('art')" data-category="culture">
                        <div class="activity-image" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <div class="activity-overlay">
                                <span class="activity-badge">文化系</span>
                            </div>
                        </div>
                        <div class="activity-content">
                            <h3 class="activity-title">絵手紙サークル</h3>
                            <div class="activity-info">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>コミュニティセンター</span>
                            </div>
                            <div class="activity-info">
                                <i class="fas fa-clock"></i>
                                <span>毎週水 13:00</span>
                            </div>
                            <div class="activity-info">
                                <i class="fas fa-users"></i>
                                <span>8名が参加中</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bottom-nav">
                    <button class="nav-button" onclick="setActiveTab('home')">
                        <i class="fas fa-home"></i>
                        <span>ホーム</span>
                    </button>
                    <button class="nav-button" onclick="setActiveTab('records')">
                        <i class="fas fa-calendar"></i>
                        <span>記録</span>
                    </button>
                    <button class="nav-button active" onclick="setActiveTab('activities')">
                        <i class="fas fa-users"></i>
                        <span>活動</span>
                    </button>
                </div>
            </div>

            <!-- 部活動詳細画面 -->
            <div id="activity-detail" class="page">
                <div class="content" style="padding: 0; background: white;">
                    <!-- 画像ヘッダー -->
                    <div class="detail-image">
                        <button class="detail-back-btn" onclick="showPage('activities')">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div class="detail-overlay">
                            <span class="activity-badge">運動系</span>
                            <h2 class="detail-title">朝の健康ウォーキング部</h2>
                        </div>
                    </div>

                    <!-- タブ切り替え -->
                    <div class="detail-tabs">
                        <button class="detail-tab active" onclick="switchDetailTab(this, 'info')">
                            <i class="fas fa-info-circle"></i>
                            <span>詳細情報</span>
                        </button>
                        <button class="detail-tab" onclick="switchDetailTab(this, 'report')">
                            <i class="fas fa-newspaper"></i>
                            <span>活動報告</span>
                        </button>
                    </div>

                    <!-- 詳細情報タブ -->
                    <div id="tab-info" class="tab-content active">
                        <div style="padding: 24px;">
                            <div class="detail-info-card">
                                <div class="detail-info-row">
                                    <i class="fas fa-tag"></i>
                                    <div>
                                        <span class="info-label">体力レベル</span>
                                        <span class="info-value">やさしい</span>
                                    </div>
                                </div>
                                <div class="detail-info-row">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <div>
                                        <span class="info-label">活動場所</span>
                                        <span class="info-value">日向市中央公園</span>
                                    </div>
                                </div>
                                <div class="detail-info-row">
                                    <i class="fas fa-clock"></i>
                                    <div>
                                        <span class="info-label">活動日時</span>
                                        <span class="info-value">毎週火・木 朝7:00〜8:00</span>
                                    </div>
                                </div>
                                <div class="detail-info-row">
                                    <i class="fas fa-users"></i>
                                    <div>
                                        <span class="info-label">参加人数</span>
                                        <span class="info-value">12名が参加中</span>
                                    </div>
                                </div>
                                <div class="detail-info-row">
                                    <i class="fas fa-yen-sign"></i>
                                    <div>
                                        <span class="info-label">参加費</span>
                                        <span class="info-value">無料</span>
                                    </div>
                                </div>
                            </div>

                            <div class="detail-description">
                                <h3 style="font-size: 20px; font-weight: 600; margin-bottom: 12px;">活動内容</h3>
                                <p style="font-size: 16px; line-height: 1.6; color: #666;">
                                    朝の爽やかな空気の中、公園を約1時間ゆっくり歩きます。
                                    無理のないペースで、おしゃべりしながら楽しく歩きましょう。<br><br>
                                    初心者の方も大歓迎です。運動不足の解消や、朝の習慣づくりに最適です。
                                </p>
                            </div>

                            <button class="main-button success-button" onclick="joinActivity()">
                                <i class="fas fa-user-plus"></i>
                                <span>参加を申し込む</span>
                            </button>

                            <div class="support-card">
                                <div class="support-icon">
                                    <i class="fas fa-phone"></i>
                                </div>
                                <h3 class="support-title">お問い合わせ</h3>
                                <p class="support-text">
                                    わからないことがあれば<br>
                                    お気軽にお電話ください
                                </p>
                                <button class="phone-button" onclick="alert('電話：0982-XX-XXXX')">
                                    <i class="fas fa-phone"></i>
                                    <span>電話する</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 活動報告タブ -->
                    <div id="tab-report" class="tab-content">
                        <div style="padding: 24px;">
                            <div class="report-card">
                                <img src="https://stat.ameba.jp/user_images/20140720/09/funaroom/8e/09/j/o0800045013008387592.jpg" class="report-image" alt="活動写真">
                                <div class="report-header">
                                    <div class="report-meta">
                                        <span class="report-author">スタッフ 山田</span>
                                        <span class="report-date">2日前</span>
                                    </div>
                                </div>
                                <div class="report-content">
                                    <p>今朝も気持ちよく歩きました！新しく参加された佐藤さんも、皆さんとすぐに打ち解けて楽しそうでした。桜が咲き始めていて、春を感じながらのウォーキングでした🌸</p>
                                </div>
                                <div class="report-stats">
                                    <span><i class="fas fa-heart"></i> 15</span>
                                    <span><i class="fas fa-comment"></i> 3</span>
                                </div>
                            </div>

                            <div class="report-card">
                                <div class="report-header">
                                    <div class="report-meta">
                                        <span class="report-author">スタッフ 田中</span>
                                        <span class="report-date">1週間前</span>
                                    </div>
                                </div>
                                <div class="report-content">
                                    <p>雨の予報でしたが、みんなの日頃の行いが良いのか、晴れました！今日は15名の参加で賑やかでした。来週は花見ウォーキングを計画中です。</p>
                                </div>
                                <div class="report-stats">
                                    <span><i class="fas fa-heart"></i> 23</span>
                                    <span><i class="fas fa-comment"></i> 5</span>
                                </div>
                            </div>

                            <div class="report-card">
                                <div class="report-header">
                                    <div class="report-meta">
                                        <span class="report-author">スタッフ 鈴木</span>
                                        <span class="report-date">2週間前</span>
                                    </div>
                                </div>
                                <div class="report-content">
                                    <p>今月の目標達成！全員で合計1000km歩きました！来月も楽しく健康づくりを続けていきましょう。新規メンバーも募集中です。</p>
                                </div>
                                <div class="report-stats">
                                    <span><i class="fas fa-heart"></i> 32</span>
                                    <span><i class="fas fa-comment"></i> 8</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let dailyAnswers = {};
        let healthAnswers = {};
        let oralAnswers = {};
        let fingerRingOrigin = 'health-check-intro';
        let oralCheckOrigin = 'health-check-intro';
        let balanceTimer = null;
        let balanceTime = 0;
        let reactionState = null;

        // 健康チェックの質問
        const healthQuestions = [
            { id: 'health-1', question: '最近、体重が<br>減りましたか？', options: ['3kg以上減った', '少し減った', '変わらない'] },
            { id: 'health-2', question: '食事を食べる時<br>むせることがありますか？', options: ['よくある', '時々ある', 'ない'] },
            { id: 'health-3', question: '週に何回<br>運動していますか？', options: ['ほとんどしない', '1〜2回', '3回以上'] },
            { id: 'health-4', question: '薬の飲み忘れは<br>ありますか？', options: ['よくある', '時々ある', 'ない'] },
            { id: 'health-5', question: '最近、気分が<br>落ち込みますか？', options: ['よくある', '時々ある', 'あまりない'] }
        ];

        const oralQuestions = [
            { id: 'oral-1', question: '硬いものが<br>食べにくくなりましたか？', options: [{ text: 'はい', value: 1 }, { text: 'いいえ', value: 0 }] },
            { id: 'oral-2', question: '食事中に<br>むせることが増えましたか？', options: [{ text: 'はい', value: 1 }, { text: 'いいえ', value: 0 }] },
            { id: 'oral-3', question: '口が乾燥しやすいと<br>感じますか？', options: [{ text: 'はい', value: 1 }, { text: 'いいえ', value: 0 }] },
            { id: 'oral-4', question: '滑舌が悪くなったと<br>感じますか？', options: [{ text: 'はい', value: 1 }, { text: 'いいえ', value: 0 }] },
            { id: 'oral-5', question: '人と話す機会が<br>減りましたか？', options: [{ text: 'はい', value: 1 }, { text: 'いいえ', value: 0 }] }
        ];

        // 部活動データ
        const activityData = {
            walking: {
                category: '運動系',
                title: '朝の健康ウォーキング部',
                level: 'やさしい',
                place: '日向市中央公園',
                time: '毎週火・木 朝7:00〜8:00',
                members: '12名が参加中',
                fee: '無料',
                description: '朝の爽やかな空気の中、公園を約1時間ゆっくり歩きます。無理のないペースで、おしゃべりしながら楽しく歩きましょう。<br><br>初心者の方も大歓迎です。運動不足の解消や、朝の習慣づくりに最適です。'
            },
            yoga: {
                category: '運動系',
                title: 'ゆったりヨガ教室',
                level: 'やさしい',
                place: 'FUN・A・ROOMスタジオ',
                time: '毎週月・金 10:00〜11:00',
                members: '15名が参加中',
                fee: '月額 1,000円',
                description: 'ゆったりとした動きで、体をほぐしていきます。呼吸法も学べて、心身ともにリラックスできます。<br><br>椅子を使ったヨガも行うので、体が硬い方でも安心してご参加いただけます。'
            },
            art: {
                category: '文化系',
                title: '絵手紙サークル',
                level: 'どなたでも',
                place: 'コミュニティセンター',
                time: '毎週水 13:00〜15:00',
                members: '8名が参加中',
                fee: '材料費 500円/回',
                description: '季節の花や風景を、絵手紙にして楽しみます。上手い下手は関係なく、思いを込めて描くことが大切です。<br><br>描いた作品は、お友達やご家族に送ることもできます。'
            }
        };

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            const page = document.getElementById(pageId);
            if (page) {
                page.classList.add('active');
                page.scrollTop = 0;
            }

            // 特定のページで追加の処理を実行
            if (pageId === 'daily-health-tasks' && typeof checkDailyInterviewTime === 'function') {
                checkDailyInterviewTime();
            }
        }

        function setActiveTab(tab) {
            showPage(tab);
            
            document.querySelectorAll('.nav-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const activeBtn = document.querySelector(`.nav-button[onclick*="${tab}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
        }

        // カテゴリーフィルター
        function filterCategory(button, category) {
            // タブの状態を更新
            document.querySelectorAll('.category-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            button.classList.add('active');
            
            // カードの表示/非表示
            const cards = document.querySelectorAll('.activity-card');
            cards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // 部活動詳細表示
        function showActivityDetail(activityId) {
            const activity = activityData[activityId];
            if (!activity) return;
            
            // 詳細情報を更新
            const detailPage = document.getElementById('activity-detail');
            if (detailPage) {
                // タイトルとカテゴリー
                detailPage.querySelector('.detail-title').textContent = activity.title;
                detailPage.querySelectorAll('.activity-badge').forEach(badge => {
                    badge.textContent = activity.category;
                });
                
                // 詳細情報の更新
                const infoRows = detailPage.querySelectorAll('.detail-info-row');
                if (infoRows[0]) infoRows[0].querySelector('.info-value').textContent = activity.level;
                if (infoRows[1]) infoRows[1].querySelector('.info-value').textContent = activity.place;
                if (infoRows[2]) infoRows[2].querySelector('.info-value').textContent = activity.time;
                if (infoRows[3]) infoRows[3].querySelector('.info-value').textContent = activity.members;
                if (infoRows[4]) infoRows[4].querySelector('.info-value').textContent = activity.fee;
                
                // 説明文
                const descriptionEl = detailPage.querySelector('.detail-description p');
                if (descriptionEl) descriptionEl.innerHTML = activity.description;
            }
            
            showPage('activity-detail');
        }

        // タブ切り替え
        function switchDetailTab(button, tabName) {
            // タブボタンの状態を更新
            document.querySelectorAll('.detail-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            button.classList.add('active');
            
            // タブコンテンツの表示/非表示
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`tab-${tabName}`).classList.add('active');
        }

        // 参加申し込み
        function joinActivity() {
            alert('参加申し込みを受け付けました！\n\n担当者から連絡がありますので、しばらくお待ちください。');
        }

        // 指輪っかテスト
        function openFingerRingTest(origin = 'health-check-intro') {
            fingerRingOrigin = origin || 'health-check-intro';
            resetFingerRingTest();
            showPage('finger-ring-test');
        }

        function backFromFingerRing() {
            showPage(fingerRingOrigin || 'health-check-intro');
        }

        function resetFingerRingTest() {
            const optionContainer = document.getElementById('finger-ring-options');
            if (optionContainer) {
                optionContainer.querySelectorAll('.option-button').forEach(btn => {
                    btn.classList.remove('selected');
                });
            }

            const resultBox = document.getElementById('finger-ring-result');
            const badge = document.getElementById('finger-ring-badge');
            const title = document.getElementById('finger-ring-title');
            const text = document.getElementById('finger-ring-text');

            if (resultBox) {
                resultBox.style.display = 'none';
            }
            if (badge) {
                badge.className = 'result-badge good';
                badge.innerHTML = '<i class="fas fa-check"></i>';
            }
            if (title) {
                title.textContent = '結果を表示します';
            }
            if (text) {
                text.textContent = '選択すると結果が表示されます。';
            }
        }

        function handleFingerRing(result, button) {
            const optionContainer = document.getElementById('finger-ring-options');
            if (optionContainer) {
                optionContainer.querySelectorAll('.option-button').forEach(btn => {
                    btn.classList.remove('selected');
                });
            }
            if (button) {
                button.classList.add('selected');
            }

            const resultBox = document.getElementById('finger-ring-result');
            const badge = document.getElementById('finger-ring-badge');
            const title = document.getElementById('finger-ring-title');
            const text = document.getElementById('finger-ring-text');

            if (!resultBox || !badge || !title || !text) return;

            if (result === 'tight') {
                badge.className = 'result-badge good';
                badge.innerHTML = '<i class="fas fa-check"></i>';
                title.textContent = '筋力は十分です';
                text.innerHTML = 'ふくらはぎがしっかりしている状態です。<br>今の運動習慣を続けましょう。';
            } else if (result === 'fit') {
                badge.className = 'result-badge warning';
                badge.innerHTML = '<i class="fas fa-exclamation"></i>';
                title.textContent = 'やや注意が必要です';
                text.innerHTML = '筋肉量が少し低下している可能性があります。<br>軽い筋トレや散歩を取り入れましょう。';
            } else {
                badge.className = 'result-badge caution';
                badge.innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
                title.textContent = 'サルコペニアのリスクあり';
                text.innerHTML = '筋肉量がかなり低下している可能性があります。<br>専門家に相談することをおすすめします。';
            }

            resultBox.style.display = 'block';
        }

        // 口腔フレイルチェック
        function startOralCheck(origin) {
            if (origin) {
                oralCheckOrigin = origin;
            } else if (!oralCheckOrigin) {
                oralCheckOrigin = 'health-check-intro';
            }
            oralAnswers = {};

            const firstPage = document.getElementById('oral-check-1');
            if (firstPage) {
                firstPage.querySelectorAll('.option-button').forEach(btn => {
                    btn.classList.remove('selected');
                });
            }

            for (let i = 2; i <= oralQuestions.length; i++) {
                const page = document.getElementById(`oral-check-${i}`);
                if (page) {
                    page.innerHTML = '';
                    page.className = 'page';
                }
            }

            const badge = document.getElementById('oral-result-badge');
            const title = document.getElementById('oral-result-title');
            const text = document.getElementById('oral-result-text');
            const adviceList = document.getElementById('oral-advice-list');

            if (badge) {
                badge.className = 'result-badge good';
                badge.innerHTML = '<i class="fas fa-check"></i>';
            }
            if (title) {
                title.textContent = '結果を表示します';
            }
            if (text) {
                text.textContent = 'チェックが終わると結果が表示されます。';
            }
            if (adviceList) {
                adviceList.innerHTML = '';
            }

            showPage('oral-check-1');
        }

        function backFromOralCheck() {
            showPage(oralCheckOrigin || 'health-check-intro');
        }

        function selectOralOption(button, questionId, value) {
            const container = button.parentElement;
            if (container) {
                container.querySelectorAll('.option-button').forEach(btn => {
                    btn.classList.remove('selected');
                });
            }

            button.classList.add('selected');
            button.dataset.value = value;
            oralAnswers[questionId] = value;
        }

        function nextOralQuestion(currentNum) {
            const currentId = `oral-${currentNum}`;
            if (typeof oralAnswers[currentId] === 'undefined') {
                alert('選択してください');
                return;
            }

            const total = oralQuestions.length;

            if (currentNum < total) {
                const nextNum = currentNum + 1;
                const nextQuestion = oralQuestions[nextNum - 1];
                const progress = (nextNum / total) * 100;

                const nextPageHtml = `
                    <div class="header header-small">
                        <h1 class="header-title" style="font-size: 24px;">口腔フレイルチェック</h1>
                    </div>

                    <div class="question-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>

                        <div class="question-number">${nextNum}</div>
                        <h2 class="question-text">${nextQuestion.question}</h2>

                        ${nextQuestion.options.map(opt => `
                            <button class="option-button" data-value="${opt.value}" onclick="selectOralOption(this, '${nextQuestion.id}', ${opt.value})">
                                <span>${opt.text}</span>
                            </button>
                        `).join('')}

                        <div style="margin-top: 32px;">
                            <button class="main-button" onclick="nextOralQuestion(${nextNum})">
                                ${nextNum === total ? '結果を見る' : '次へ'}
                            </button>
                            <button class="back-button" onclick="showPage('oral-check-${currentNum}')">
                                <i class="fas fa-arrow-left"></i> 戻る
                            </button>
                        </div>
                    </div>
                `;

                let nextPage = document.getElementById(`oral-check-${nextNum}`);
                if (!nextPage) {
                    nextPage = document.createElement('div');
                    nextPage.id = `oral-check-${nextNum}`;
                    nextPage.className = 'page';
                    const screen = document.querySelector('.screen');
                    if (screen) {
                        screen.appendChild(nextPage);
                    }
                }

                nextPage.innerHTML = nextPageHtml;

                const storedValue = oralAnswers[nextQuestion.id];
                if (typeof storedValue !== 'undefined') {
                    nextPage.querySelectorAll('.option-button').forEach(btn => {
                        if (Number(btn.dataset.value) === storedValue) {
                            btn.classList.add('selected');
                        }
                    });
                }

                showPage(`oral-check-${nextNum}`);
            } else {
                showOralResult();
            }
        }

        function showOralResult() {
            const score = Object.values(oralAnswers).reduce((sum, value) => sum + Number(value || 0), 0);

            const badge = document.getElementById('oral-result-badge');
            const title = document.getElementById('oral-result-title');
            const text = document.getElementById('oral-result-text');
            const adviceList = document.getElementById('oral-advice-list');

            if (badge && title && text && adviceList) {
                if (score === 0) {
                    badge.className = 'result-badge good';
                    badge.innerHTML = '<i class="fas fa-check"></i>';
                    title.textContent = '口腔の健康状態：良好';
                    text.innerHTML = '特に気になる点はありません。<br>今のケアを続けましょう。';
                    adviceList.innerHTML = `
                        <div class="result-item">
                            <div class="result-advice">今の歯みがきと食習慣を続けましょう</div>
                        </div>
                    `;
                } else if (score <= 2) {
                    badge.className = 'result-badge warning';
                    badge.innerHTML = '<i class="fas fa-exclamation"></i>';
                    title.textContent = '口腔の健康状態：注意';
                    text.innerHTML = '軽い口腔フレイルが疑われます。<br>日頃のケアを少し強化しましょう。';
                    adviceList.innerHTML = `
                        <div class="result-item">
                            <div class="result-category">ケア</div>
                            <div class="result-advice">口や舌をよく動かす体操を取り入れましょう</div>
                        </div>
                        <div class="result-item">
                            <div class="result-category">食事</div>
                            <div class="result-advice">よく噛むことを意識して食事を楽しみましょう</div>
                        </div>
                    `;
                } else {
                    badge.className = 'result-badge caution';
                    badge.innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
                    title.textContent = '口腔の健康状態：要相談';
                    text.innerHTML = '口腔機能の低下が心配されます。<br>歯科医師や専門家に相談しましょう。';
                    adviceList.innerHTML = `
                        <div class="result-item">
                            <div class="result-category">受診</div>
                            <div class="result-advice">歯科での検診やリハビリ相談を受けましょう</div>
                        </div>
                        <div class="result-item">
                            <div class="result-category">トレーニング</div>
                            <div class="result-advice">口の体操や声出しトレーニングを毎日行いましょう</div>
                        </div>
                    `;
                }
            }

            oralAnswers = {};
            showPage('oral-result');
        }

        // 毎日のチェック
        function selectDailyOption(button, questionId) {
            const container = button.parentElement;
            container.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            button.classList.add('selected');
            dailyAnswers[questionId] = button.querySelector('span').textContent;
        }

        function nextDailyQuestion(currentId, nextPageId) {
            if (!dailyAnswers[currentId]) {
                alert('選択してください');
                return;
            }
            showPage(nextPageId);
        }

        function completeDailyCheck() {
            if (!dailyAnswers['daily-3']) {
                alert('選択してください');
                return;
            }
            dailyAnswers = {};
            document.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            showPage('daily-complete');
        }

        // 健康診断
        function selectHealthOption(button, questionId) {
            const container = button.parentElement;
            container.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            button.classList.add('selected');
            healthAnswers[questionId] = button.querySelector('span').textContent;
        }

        function nextHealthQuestion(currentNum) {
            const currentId = `health-${currentNum}`;
            if (!healthAnswers[currentId]) {
                alert('選択してください');
                return;
            }
            
            if (currentNum < 5) {
                const nextNum = currentNum + 1;
                const nextQuestion = healthQuestions[nextNum - 1];
                
                // 次の質問ページを動的に生成
                const nextPageHtml = `
                    <div class="header header-small">
                        <h1 class="header-title" style="font-size: 24px;">健康診断</h1>
                    </div>
                    
                    <div class="question-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${nextNum * 20}%"></div>
                        </div>
                        
                        <div class="question-number">${nextNum}</div>
                        <h2 class="question-text">${nextQuestion.question}</h2>
                        
                        ${nextQuestion.options.map(opt => `
                            <button class="option-button" onclick="selectHealthOption(this, '${nextQuestion.id}')">
                                <span>${opt}</span>
                            </button>
                        `).join('')}
                        
                        <div style="margin-top: 32px;">
                            <button class="main-button" onclick="nextHealthQuestion(${nextNum})">
                                ${nextNum === 5 ? '結果を見る' : '次へ'}
                            </button>
                            <button class="back-button" onclick="showPage('health-check-${currentNum}')">
                                <i class="fas fa-arrow-left"></i> 戻る
                            </button>
                        </div>
                    </div>
                `;
                
                let nextPage = document.getElementById(`health-check-${nextNum}`);
                if (!nextPage) {
                    nextPage = document.createElement('div');
                    nextPage.id = `health-check-${nextNum}`;
                    nextPage.className = 'page';
                    document.querySelector('.screen').appendChild(nextPage);
                }
                nextPage.innerHTML = nextPageHtml;
                showPage(`health-check-${nextNum}`);
            } else {
                showHealthResult();
            }
        }

        function showHealthResult() {
            // 簡単な結果判定
            let score = 0;
            Object.values(healthAnswers).forEach(answer => {
                if (answer.includes('ない') || answer.includes('変わらない') || answer.includes('3回以上')) {
                    score += 0;
                } else if (answer.includes('時々') || answer.includes('少し') || answer.includes('1〜2回')) {
                    score += 1;
                } else {
                    score += 2;
                }
            });
            
            const badge = document.getElementById('result-badge');
            const title = document.getElementById('result-title');
            const text = document.getElementById('result-text');
            const adviceList = document.getElementById('advice-list');
            
            if (score <= 3) {
                badge.className = 'result-badge good';
                badge.innerHTML = '<i class="fas fa-check"></i>';
                title.textContent = '健康状態：良好';
                text.innerHTML = '大きな問題は見られません。<br>この調子で健康管理を続けましょう。';
                adviceList.innerHTML = `
                    <div class="result-item">
                        <div class="result-advice">今の生活習慣を維持しましょう</div>
                    </div>
                `;
            } else if (score <= 7) {
                badge.className = 'result-badge warning';
                badge.innerHTML = '<i class="fas fa-exclamation"></i>';
                title.textContent = '健康状態：注意';
                text.innerHTML = '少し気になる点があります。<br>生活習慣を見直してみましょう。';
                adviceList.innerHTML = `
                    <div class="result-item">
                        <div class="result-category">運動</div>
                        <div class="result-advice">週2〜3回の軽い運動を心がけましょう</div>
                    </div>
                    <div class="result-item">
                        <div class="result-category">食事</div>
                        <div class="result-advice">バランスの良い食事を心がけましょう</div>
                    </div>
                `;
            } else {
                badge.className = 'result-badge caution';
                badge.innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
                title.textContent = '健康状態：要相談';
                text.innerHTML = '健康リスクが高い状態です。<br>専門家にご相談ください。';
                adviceList.innerHTML = `
                    <div class="result-item">
                        <div class="result-category">重要</div>
                        <div class="result-advice">かかりつけ医に相談することをおすすめします</div>
                    </div>
                    <div class="result-item">
                        <div class="result-category">サポート</div>
                        <div class="result-advice">地域の健康相談窓口もご利用ください</div>
                    </div>
                `;
            }
            
            healthAnswers = {};
            showPage('health-result');
        }

        // 片足立ちゲーム
        function startBalance() {
            if (balanceTimer) return;
            
            const label = document.getElementById('balance-label');
            label.textContent = '計測中...';
            
            const startTime = Date.now();
            balanceTimer = setInterval(() => {
                balanceTime = (Date.now() - startTime) / 1000;
                document.getElementById('balance-time').textContent = balanceTime.toFixed(1) + '秒';
            }, 100);
        }

        function stopBalance() {
            if (!balanceTimer) return;
            
            clearInterval(balanceTimer);
            balanceTimer = null;
            
            const label = document.getElementById('balance-label');
            label.textContent = '記録完了！';
            
            setTimeout(() => {
                alert(`記録：${balanceTime.toFixed(1)}秒\n\nとても良い記録です！`);
                document.getElementById('balance-time').textContent = '0.0秒';
                label.textContent = 'ボタンを長押し';
                balanceTime = 0;
            }, 500);
        }

        // 反応速度ゲーム
        function startReaction() {
            const area = document.getElementById('reaction-area');
            const message = document.getElementById('reaction-message');
            const button = document.getElementById('reaction-start');
            
            button.style.display = 'none';
            area.style.background = '#e0e0e0';
            message.textContent = '待って...';
            message.style.color = '#666';
            
            reactionState = { waiting: true };
            
            const delay = Math.random() * 3000 + 2000;
            setTimeout(() => {
                if (!reactionState) return;
                
                area.style.background = '#10B981';
                message.textContent = 'タップ！';
                message.style.color = 'white';
                reactionState.startTime = Date.now();
                reactionState.waiting = false;
            }, delay);
        }

        function reactionClick() {
            if (!reactionState) return;
            
            const area = document.getElementById('reaction-area');
            const message = document.getElementById('reaction-message');
            const button = document.getElementById('reaction-start');
            
            if (reactionState.waiting) {
                area.style.background = '#EF4444';
                message.textContent = '早すぎ！';
                message.style.color = 'white';
            } else {
                const time = Date.now() - reactionState.startTime;
                area.style.background = '#4A90E2';
                message.textContent = time + 'ミリ秒';
                message.style.color = 'white';
                
                setTimeout(() => {
                    alert(`反応速度：${time}ミリ秒\n\n良い反応速度です！`);
                }, 500);
            }
            
            setTimeout(() => {
                area.style.background = '#e0e0e0';
                message.textContent = 'スタートを押してください';
                message.style.color = '#666';
                button.style.display = 'block';
                reactionState = null;
            }, 2000);
        }

        // タッチイベント最適化
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);

        // ===== 新しい健康タスク機能 =====

        // 2週間健康診断のチェック
        function checkBiweeklyHealth() {
            const lastCheckup = localStorage.getItem('lastBiweeklyCheckup');
            const now = new Date();

            if (lastCheckup) {
                const lastDate = new Date(lastCheckup);
                const daysDiff = Math.floor((now - lastDate) / (1000 * 60 * 60 * 24));

                if (daysDiff < 14) {
                    // まだ14日経っていない - 次回診断日を表示
                    showPage('biweekly-checkup-intro');
                    document.getElementById('biweekly-available').style.display = 'none';
                    document.getElementById('biweekly-not-available').style.display = 'block';

                    // 次回診断日を計算
                    const nextDate = new Date(lastDate);
                    nextDate.setDate(nextDate.getDate() + 14);
                    const month = nextDate.getMonth() + 1;
                    const day = nextDate.getDate();
                    document.getElementById('next-checkup-date').textContent = `${month}月${day}日`;

                    // ホーム画面のステータスも更新
                    document.getElementById('biweekly-status').textContent = `次回：${month}月${day}日`;
                    return;
                }
            }

            // 診断可能
            showPage('biweekly-checkup-intro');
            document.getElementById('biweekly-available').style.display = 'block';
            document.getElementById('biweekly-not-available').style.display = 'none';
            document.getElementById('biweekly-status').textContent = '診断可能です';
        }

        // 健康診断を完了した際に呼び出す
        function completeBiweeklyCheckup() {
            const now = new Date();
            localStorage.setItem('lastBiweeklyCheckup', now.toISOString());
            checkBiweeklyHealth(); // ステータスを更新
        }

        // 毎日の問診を開始
        function startDailyInterview() {
            const today = new Date().toDateString();
            const lastInterview = localStorage.getItem('lastDailyInterview');

            if (lastInterview === today) {
                alert('本日の問診は既に完了しています');
                return;
            }

            showPage('daily-check-1');
        }

        // 18時以降チェック
        function checkDailyInterviewTime() {
            const now = new Date();
            const hour = now.getHours();
            const today = new Date().toDateString();
            const lastInterview = localStorage.getItem('lastDailyInterview');

            const card = document.getElementById('daily-interview-card');
            const status = document.getElementById('daily-interview-status');
            const button = card.querySelector('.main-button');

            if (hour >= 18) {
                card.style.display = 'block';
                if (lastInterview === today) {
                    status.textContent = '本日の問診は完了しています';
                    status.style.display = 'block';
                    button.style.display = 'none';
                } else {
                    status.style.display = 'none';
                    button.style.display = 'block';
                }
            } else {
                card.style.display = 'none';
            }
        }

        // 毎日の問診を完了
        const originalCompleteDailyCheck = completeDailyCheck;
        function completeDailyCheck() {
            if (!dailyAnswers['daily-3']) {
                alert('選択してください');
                return;
            }

            const today = new Date().toDateString();
            localStorage.setItem('lastDailyInterview', today);
            showPage('daily-complete');
        }

        // 運動データ
        const exerciseData = {
            'marching': {
                title: 'その場足踏み',
                duration: 180, // 3分
                instructions: [
                    '1. 背筋を伸ばして立ちます',
                    '2. 腕を大きく振りながら、その場で足踏みをします',
                    '3. 膝を腰の高さまで上げるように意識しましょう',
                    '4. リズムよく、無理のないペースで続けます'
                ]
            },
            'radio-taiso': {
                title: 'ラジオ体操',
                duration: 300, // 5分
                instructions: [
                    '1. ゆったりとした場所で立ちます',
                    '2. 深呼吸から始めて、全身をほぐします',
                    '3. 腕を回したり、体を曲げたりします',
                    '4. 無理せず、できる範囲で体を動かしましょう'
                ]
            },
            'stretch': {
                title: 'かんたんストレッチ',
                duration: 180, // 3分
                instructions: [
                    '1. 椅子に座った状態で行います',
                    '2. 首をゆっくり回します',
                    '3. 肩を上下に動かします',
                    '4. 腕を伸ばして、背中を伸ばします',
                    '5. 呼吸を止めずに、ゆっくり行いましょう'
                ]
            },
            'breathing': {
                title: '深呼吸',
                duration: 120, // 2分
                instructions: [
                    '1. 楽な姿勢で座ります',
                    '2. 鼻からゆっくり息を吸います（4秒）',
                    '3. 少し息を止めます（2秒）',
                    '4. 口からゆっくり息を吐きます（6秒）',
                    '5. これを繰り返します'
                ]
            }
        };

        let currentExercise = null;
        let exerciseTimer = null;
        let exerciseTimeLeft = 0;
        let exerciseRunning = false;

        // 運動を開始
        function startExercise(exerciseType) {
            currentExercise = exerciseData[exerciseType];
            if (!currentExercise) return;

            exerciseTimeLeft = currentExercise.duration;
            exerciseRunning = false;

            // 画面を更新
            document.getElementById('exercise-title').textContent = currentExercise.title;

            const instructions = currentExercise.instructions.map((inst, i) =>
                `<div style="margin-bottom: 12px;">${inst}</div>`
            ).join('');
            document.getElementById('exercise-instructions').innerHTML = instructions;

            updateTimerDisplay();

            // ボタンの状態をリセット
            document.getElementById('exercise-start-btn').style.display = 'block';
            document.getElementById('exercise-pause-btn').style.display = 'none';
            document.getElementById('exercise-resume-btn').style.display = 'none';

            showPage('exercise-screen');
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(exerciseTimeLeft / 60);
            const seconds = exerciseTimeLeft % 60;
            document.getElementById('timer-display').textContent =
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function startExerciseTimer() {
            exerciseRunning = true;
            document.getElementById('exercise-start-btn').style.display = 'none';
            document.getElementById('exercise-pause-btn').style.display = 'block';

            exerciseTimer = setInterval(() => {
                if (exerciseTimeLeft > 0) {
                    exerciseTimeLeft--;
                    updateTimerDisplay();
                } else {
                    completeExercise();
                }
            }, 1000);
        }

        function pauseExerciseTimer() {
            exerciseRunning = false;
            clearInterval(exerciseTimer);
            document.getElementById('exercise-pause-btn').style.display = 'none';
            document.getElementById('exercise-resume-btn').style.display = 'block';
        }

        function resumeExerciseTimer() {
            startExerciseTimer();
        }

        function completeExercise() {
            clearInterval(exerciseTimer);
            exerciseRunning = false;

            document.getElementById('exercise-complete-message').innerHTML =
                `${currentExercise.title}を完了しました！<br>素晴らしいです！`;

            showPage('exercise-complete');
        }

        // ページ読み込み時の初期化
        window.addEventListener('DOMContentLoaded', function() {
            // 18時以降チェック
            checkDailyInterviewTime();

            // 2週間健康診断のステータスを更新
            const lastCheckup = localStorage.getItem('lastBiweeklyCheckup');
            if (lastCheckup) {
                const lastDate = new Date(lastCheckup);
                const now = new Date();
                const daysDiff = Math.floor((now - lastDate) / (1000 * 60 * 60 * 24));

                if (daysDiff < 14) {
                    const nextDate = new Date(lastDate);
                    nextDate.setDate(nextDate.getDate() + 14);
                    const month = nextDate.getMonth() + 1;
                    const day = nextDate.getDate();
                    document.getElementById('biweekly-status').textContent = `次回：${month}月${day}日`;
                }
            }
        });
    </script>
</body>
</html>
