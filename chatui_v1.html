<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>FUN・A・ROOM チャットUI プロトタイプ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Hiragino Sans", "Yu Gothic", "Meiryo", sans-serif;
            background: #f1f4f8;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 24px;
            color: #1f2933;
        }

        .phone-frame {
            width: 100%;
            max-width: 430px;
            height: 900px;
            background: #101316;
            border-radius: 46px;
            padding: 12px;
            box-shadow: 0 25px 60px rgba(15, 23, 42, 0.35);
            position: relative;
        }

        .screen {
            width: 100%;
            height: 100%;
            background: #ffffff;
            border-radius: 34px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .status-bar {
            height: 54px;
            padding: 0 28px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #ffffff;
            border-bottom: 1px solid rgba(148, 163, 184, 0.3);
            font-weight: 600;
            letter-spacing: 0.02em;
        }

        /* 上タブナビゲーション */
        .top-nav {
            display: flex;
            background: #ffffff;
            border-bottom: 1px solid rgba(148, 163, 184, 0.3);
            padding: 0;
        }

        .top-nav-button {
            flex: 1;
            background: none;
            border: none;
            padding: 16px;
            cursor: pointer;
            font-size: 17px;
            color: #64748b;
            font-weight: 500;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
        }

        .top-nav-button.active {
            color: #4A90E2;
            font-weight: 600;
            border-bottom-color: #4A90E2;
        }

        .top-nav-button:active {
            background: #f8fafc;
        }

        /* メインタブコンテンツ */
        .main-tab-content {
            display: none;
            flex: 1;
            flex-direction: column;
            overflow: hidden;
        }

        .main-tab-content.active {
            display: flex;
        }

        .chat-header {
            padding: 24px 28px 20px;
            background: linear-gradient(145deg, #4A90E2 0%, #5CA0F2 100%);
            color: #fff;
        }

        .assistant-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 6px;
        }

        .assistant-subtitle {
            font-size: 17px;
            opacity: 0.95;
            line-height: 1.6;
        }

        .chat-body {
            flex: 1;
            background: #f7fafc;
            padding: 20px 18px 120px;
            overflow-y: auto;
            position: relative;
            transition: padding-bottom 0.3s ease;
        }

        .chat-footer.collapsed ~ .chat-body {
            padding-bottom: 80px;
        }

        .chat-body::-webkit-scrollbar {
            width: 0;
        }

        .message {
            display: flex;
            margin-bottom: 18px;
            gap: 12px;
            align-items: flex-start;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.assistant {
            flex-direction: row;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 20px;
            flex-shrink: 0;
        }

        .bubble {
            max-width: 78%;
            padding: 16px 18px;
            border-radius: 22px;
            font-size: 17px;
            line-height: 1.7;
            box-shadow: 0 10px 20px rgba(15, 23, 42, 0.08);
        }

        .assistant .bubble {
            background: #fff;
            border-bottom-left-radius: 8px;
        }

        .user .bubble {
            background: #4A90E2;
            color: #fff;
            border-bottom-right-radius: 8px;
        }

        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 16px;
        }

        .quick-button {
            padding: 16px 20px;
            border-radius: 18px;
            border: none;
            font-size: 18px;
            background: #e2efff;
            color: #2563eb;
            font-weight: 600;
            letter-spacing: 0.04em;
            box-shadow: inset 0 -2px 0 rgba(37, 99, 235, 0.08);
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-button i {
            margin-right: 8px;
        }

        .quick-button:active {
            transform: scale(0.97);
            box-shadow: inset 0 -2px 0 rgba(37, 99, 235, 0.15);
        }

        .card {
            background: #ffffff;
            border-radius: 22px;
            padding: 20px 22px;
            box-shadow: 0 12px 28px rgba(15, 23, 42, 0.12);
            margin-top: 14px;
            font-size: 17px;
            line-height: 1.75;
        }

        .card h3 {
            font-size: 20px;
            margin-bottom: 12px;
        }

        .card p {
            margin-bottom: 10px;
        }

        .card .secondary {
            font-size: 15px;
            color: #64748b;
        }

        .card .action-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 16px;
        }

        .card-button {
            background: #4A90E2;
            color: #fff;
            font-weight: 600;
            border: none;
            border-radius: 14px;
            padding: 12px 18px;
            font-size: 16px;
            box-shadow: 0 8px 18px rgba(37, 99, 235, 0.25);
            cursor: pointer;
            transition: all 0.2s;
        }

        .card-button:active {
            transform: scale(0.97);
        }

        .card-button.secondary {
            background: #e2e8f0;
            color: #1f2933;
            box-shadow: none;
        }

        .progress {
            margin-top: 10px;
            font-size: 16px;
            color: #1f2933;
        }

        .progress span {
            font-weight: 700;
        }

        .chat-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: #ffffff;
            padding: 20px 24px 28px;
            border-top: 1px solid rgba(148, 163, 184, 0.3);
            box-shadow: 0 -10px 30px rgba(15, 23, 42, 0.1);
            transition: all 0.3s ease;
        }

        .chat-footer.collapsed {
            padding: 0;
        }

        .footer-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 24px;
            background: #f8fafc;
            border-top: 1px solid rgba(148, 163, 184, 0.3);
            cursor: pointer;
            user-select: none;
        }

        .footer-toggle:active {
            background: #f1f5f9;
        }

        .footer-toggle-title {
            font-size: 17px;
            font-weight: 700;
            color: #1f2933;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-toggle-icon {
            font-size: 14px;
            color: #64748b;
            transition: transform 0.3s ease;
        }

        .footer-toggle-icon.expanded {
            transform: rotate(180deg);
        }

        .footer-content {
            padding: 20px 24px 28px;
            max-height: 400px;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }

        .footer-content.collapsed {
            max-height: 0;
            padding: 0 24px;
        }

        .footer-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 14px;
        }

        .reply-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .reply-button {
            padding: 16px 12px;
            background: #f1f5f9;
            border-radius: 16px;
            border: 2px solid transparent;
            font-size: 17px;
            font-weight: 600;
            color: #1e3a8a;
            text-align: center;
            letter-spacing: 0.03em;
            cursor: pointer;
            transition: all 0.2s;
        }

        .reply-button:active {
            border-color: #4A90E2;
            background: #e2efff;
        }

        .reply-button.full {
            grid-column: span 2;
        }

        .divider {
            height: 1px;
            background: rgba(148, 163, 184, 0.25);
            margin: 12px 0 16px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 700;
            color: #475569;
            margin-bottom: 8px;
        }

        .tag {
            display: inline-flex;
            align-items: center;
            padding: 6px 10px;
            background: #fef9c3;
            border-radius: 999px;
            font-size: 14px;
            color: #854d0e;
            font-weight: 600;
            margin-right: 8px;
        }

        .support-card {
            background: #fff7ed;
            border-left: 6px solid #f97316;
        }

        .history-section {
            background: #f8fafc;
            border-radius: 16px;
            padding: 16px;
            margin: 16px 0;
        }

        .history-title {
            font-size: 16px;
            font-weight: 700;
            color: #64748b;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .history-item {
            background: #fff;
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #e2e8f0;
        }

        .history-item:hover {
            background: #f1f5f9;
        }

        .history-item:active {
            transform: scale(0.98);
        }

        .history-date {
            font-size: 14px;
            font-weight: 600;
            color: #4A90E2;
            margin-bottom: 4px;
        }

        .history-content {
            font-size: 14px;
            color: #64748b;
        }

        .hidden {
            display: none;
        }

        /* 部活動関連のスタイル */
        .activities-container {
            flex: 1;
            background: #f7fafc;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .activities-header {
            padding: 24px 28px 20px;
            background: linear-gradient(145deg, #4A90E2 0%, #5CA0F2 100%);
            color: #fff;
        }

        .activities-header-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 6px;
        }

        .activities-header-subtitle {
            font-size: 17px;
            opacity: 0.95;
        }

        .activities-content {
            flex: 1;
            padding: 20px 18px;
        }

        /* カテゴリータブ */
        .category-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 4px;
        }

        .category-tabs::-webkit-scrollbar {
            height: 0;
        }

        .category-tab {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 10px 18px;
            font-size: 16px;
            color: #666;
            cursor: pointer;
            white-space: nowrap;
            font-weight: 500;
            transition: all 0.2s;
        }

        .category-tab.active {
            background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);
            border-color: #4A90E2;
            color: white;
            font-weight: 600;
        }

        /* 部活動カード */
        .activity-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.2s;
        }

        .activity-card:active {
            transform: scale(0.98);
        }

        .activity-image {
            width: 100%;
            height: 160px;
            background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .activity-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);
            padding: 16px;
            color: white;
        }

        .activity-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
        }

        .activity-content {
            padding: 20px;
        }

        .activity-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
        }

        .activity-info {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            color: #666;
            margin-bottom: 8px;
        }

        .activity-info i {
            color: #4A90E2;
            width: 20px;
        }

        /* 部活動詳細画面 */
        .detail-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #ffffff;
            overflow-y: auto;
            display: none;
            flex-direction: column;
            z-index: 1000;
        }

        .detail-container.active {
            display: flex;
        }

        .detail-image {
            width: 100%;
            height: 240px;
            background: linear-gradient(135deg, #4A90E2 0%, #5CA0F2 100%);
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .detail-back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(10px);
            border: none;
            color: white;
            padding: 14px 24px;
            border-radius: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: all 0.2s;
        }

        .detail-back-btn:active {
            transform: scale(0.95);
            background: rgba(0,0,0,0.8);
        }

        .detail-back-btn i {
            font-size: 20px;
        }

        .detail-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 100%);
            padding: 24px;
            color: white;
        }

        .detail-title {
            font-size: 26px;
            font-weight: 700;
            margin-top: 8px;
        }

        /* 詳細タブ */
        .detail-tabs {
            display: flex;
            background: white;
            border-bottom: 1px solid #f0f0f0;
            padding: 0;
        }

        .detail-tab {
            flex: 1;
            background: none;
            border: none;
            padding: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 16px;
            color: #999;
            font-weight: 500;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
        }

        .detail-tab.active {
            color: #4A90E2;
            font-weight: 600;
            border-bottom-color: #4A90E2;
        }

        .detail-tab i {
            font-size: 18px;
        }

        .tab-content {
            display: none;
            background: white;
        }

        .tab-content.active {
            display: block;
        }

        .tab-inner {
            padding: 24px;
        }

        /* 詳細情報 */
        .detail-info-card {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
        }

        .detail-info-row {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .detail-info-row:last-child {
            border-bottom: none;
        }

        .detail-info-row i {
            color: #4A90E2;
            font-size: 20px;
            width: 24px;
            margin-top: 2px;
        }

        .detail-info-row .info-label {
            display: block;
            font-size: 14px;
            color: #999;
            margin-bottom: 4px;
        }

        .detail-info-row .info-value {
            display: block;
            font-size: 16px;
            color: #333;
            font-weight: 600;
        }

        .detail-description {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
        }

        .detail-description h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .detail-description p {
            font-size: 16px;
            line-height: 1.6;
            color: #666;
        }

        /* 活動報告カード */
        .report-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
        }

        .report-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 16px;
            display: block;
        }

        .report-header {
            margin-bottom: 16px;
        }

        .report-meta {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .report-author {
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }

        .report-date {
            font-size: 14px;
            color: #999;
        }

        .report-content {
            font-size: 16px;
            line-height: 1.6;
            color: #666;
            margin-bottom: 16px;
        }

        .report-stats {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #999;
        }

        .report-stats span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .report-stats i {
            color: #FF6B6B;
        }

        .success-button {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            box-shadow: 0 8px 18px rgba(16, 185, 129, 0.25);
        }

        @media (max-width: 450px) {
            body {
                padding: 0;
            }
            .phone-frame {
                border-radius: 0;
                padding: 0;
                height: 100vh;
                max-width: 100%;
            }
            .screen {
                border-radius: 0;
            }
        }
    </style>
</head>
<body>
    <div class="phone-frame">
        <div class="screen">
            <div class="status-bar">
                <span>9:41</span>
                <span><i class="fa-solid fa-signal"></i> <i class="fa-solid fa-wifi"></i> 100%</span>
            </div>

            <!-- 上タブナビゲーション -->
            <div class="top-nav">
                <button class="top-nav-button active" onclick="switchMainTab('home')">ホーム</button>
                <button class="top-nav-button" onclick="switchMainTab('activities')">部活動一覧</button>
            </div>

            <!-- ホームタブコンテンツ（チャット画面）-->
            <div id="home-tab" class="main-tab-content active">
                <div class="chat-header">
                    <div class="assistant-name">FUN・A・ROOM ケアナビ</div>
                    <div class="assistant-subtitle">田中さん、今日も元気に過ごしましょう。困ったらいつでも声をかけてくださいね。</div>
                </div>
                <div class="chat-body" id="chatBody">
                    <!-- 会話はJavaScriptで動的に追加されます -->
                </div>
                <div class="chat-footer" id="chatFooter">
                <div class="footer-toggle" onclick="toggleFooter()">
                    <div class="footer-toggle-title">
                        <i class="fa-solid fa-bars"></i>
                        かんたん操作ボタン
                    </div>
                    <i class="fa-solid fa-chevron-up footer-toggle-icon expanded" id="toggleIcon"></i>
                </div>
                <div class="footer-content" id="footerContent">
                    <div class="reply-grid">
                        <button class="reply-button" onclick="startDailyCheck()"><i class="fa-solid fa-pen-to-square"></i> 記録する</button>
                        <button class="reply-button" onclick="showGameMenu()"><i class="fa-solid fa-gamepad"></i> ゲーム</button>
                        <button class="reply-button" onclick="showHealthCheck()"><i class="fa-solid fa-stethoscope"></i> 健康診断</button>
                        <button class="reply-button" onclick="showActivities()"><i class="fa-solid fa-people-group"></i> 部活動</button>
                        <button class="reply-button full" onclick="showHistory()"><i class="fa-solid fa-clock-rotate-left"></i> 履歴を見る</button>
                    </div>
                </div>
            </div>
            <!-- ホームタブコンテンツ終了 -->
            </div>

            <!-- 部活動タブコンテンツ -->
            <div id="activities-tab" class="main-tab-content">
                <!-- 部活動一覧画面 -->
                <div id="activities-list" class="activities-container active">
                    <div class="activities-header">
                        <div class="activities-header-title">部活動</div>
                        <div class="activities-header-subtitle">仲間と楽しく健康づくり</div>
                    </div>

                    <div class="activities-content">
                        <!-- カテゴリータブ -->
                        <div class="category-tabs">
                            <button class="category-tab active" onclick="filterCategory(this, 'all')">すべて</button>
                            <button class="category-tab" onclick="filterCategory(this, 'exercise')">運動系</button>
                            <button class="category-tab" onclick="filterCategory(this, 'culture')">文化系</button>
                            <button class="category-tab" onclick="filterCategory(this, 'social')">交流系</button>
                        </div>

                        <!-- 部活動カード -->
                        <div class="activity-card" onclick="showActivityDetail('walking')" data-category="exercise">
                            <div class="activity-image" style="background-image: url('https://static.wixstatic.com/media/07cdbc_ffa8f4d3caa343ad96d08d1e33a3d943~mv2.jpg/v1/fill/w_828,h_624,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2782_JPG.jpg');">
                                <div class="activity-overlay">
                                    <span class="activity-badge">運動系</span>
                                </div>
                            </div>
                            <div class="activity-content">
                                <h3 class="activity-title">朝の健康ウォーキング部</h3>
                                <div class="activity-info">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>日向市中央公園</span>
                                </div>
                                <div class="activity-info">
                                    <i class="fas fa-clock"></i>
                                    <span>毎週火・木 朝7:00</span>
                                </div>
                                <div class="activity-info">
                                    <i class="fas fa-users"></i>
                                    <span>12名が参加中</span>
                                </div>
                            </div>
                        </div>

                        <div class="activity-card" onclick="showActivityDetail('yoga')" data-category="exercise">
                            <div class="activity-image" style="background-image: url('https://static.wixstatic.com/media/07cdbc_82a0984731614afdb20bb2b581c55d5d~mv2_d_3000_2000_s_2.jpg/v1/fill/w_562,h_374,al_c,q_80,usm_0.66_1.00_0.01/07cdbc_82a0984731614afdb20bb2b581c55d5d~mv2_d_3000_2000_s_2.jpg');">
                                <div class="activity-overlay">
                                    <span class="activity-badge">運動系</span>
                                </div>
                            </div>
                            <div class="activity-content">
                                <h3 class="activity-title">ゆったりヨガ教室</h3>
                                <div class="activity-info">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>FUN・A・ROOMスタジオ</span>
                                </div>
                                <div class="activity-info">
                                    <i class="fas fa-clock"></i>
                                    <span>毎週月・金 10:00</span>
                                </div>
                                <div class="activity-info">
                                    <i class="fas fa-users"></i>
                                    <span>15名が参加中</span>
                                </div>
                            </div>
                        </div>

                        <div class="activity-card" onclick="showActivityDetail('art')" data-category="culture">
                            <div class="activity-image" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <div class="activity-overlay">
                                    <span class="activity-badge">文化系</span>
                                </div>
                            </div>
                            <div class="activity-content">
                                <h3 class="activity-title">絵手紙サークル</h3>
                                <div class="activity-info">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>コミュニティセンター</span>
                                </div>
                                <div class="activity-info">
                                    <i class="fas fa-clock"></i>
                                    <span>毎週水 13:00</span>
                                </div>
                                <div class="activity-info">
                                    <i class="fas fa-users"></i>
                                    <span>8名が参加中</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 部活動詳細画面 -->
                <div id="activity-detail" class="detail-container">
                    <!-- 画像ヘッダー -->
                    <div class="detail-image" id="detailImage">
                        <button class="detail-back-btn" onclick="backToActivitiesList()">
                            <i class="fas fa-arrow-left"></i>
                            <span>戻る</span>
                        </button>
                        <div class="detail-overlay">
                            <span class="activity-badge" id="detailBadge">運動系</span>
                            <h2 class="detail-title" id="detailTitle">朝の健康ウォーキング部</h2>
                        </div>
                    </div>

                    <!-- タブ切り替え -->
                    <div class="detail-tabs">
                        <button class="detail-tab active" onclick="switchDetailTab(this, 'info')">
                            <i class="fas fa-info-circle"></i>
                            <span>詳細情報</span>
                        </button>
                        <button class="detail-tab" onclick="switchDetailTab(this, 'report')">
                            <i class="fas fa-newspaper"></i>
                            <span>活動報告</span>
                        </button>
                    </div>

                    <!-- 詳細情報タブ -->
                    <div id="tab-info" class="tab-content active">
                        <div class="tab-inner">
                            <div class="detail-info-card" id="detailInfoCard">
                                <div class="detail-info-row">
                                    <i class="fas fa-tag"></i>
                                    <div>
                                        <span class="info-label">体力レベル</span>
                                        <span class="info-value" id="infoLevel">やさしい</span>
                                    </div>
                                </div>
                                <div class="detail-info-row">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <div>
                                        <span class="info-label">活動場所</span>
                                        <span class="info-value" id="infoPlace">日向市中央公園</span>
                                    </div>
                                </div>
                                <div class="detail-info-row">
                                    <i class="fas fa-clock"></i>
                                    <div>
                                        <span class="info-label">活動日時</span>
                                        <span class="info-value" id="infoTime">毎週火・木 朝7:00〜8:00</span>
                                    </div>
                                </div>
                                <div class="detail-info-row">
                                    <i class="fas fa-users"></i>
                                    <div>
                                        <span class="info-label">参加人数</span>
                                        <span class="info-value" id="infoMembers">12名が参加中</span>
                                    </div>
                                </div>
                                <div class="detail-info-row">
                                    <i class="fas fa-yen-sign"></i>
                                    <div>
                                        <span class="info-label">参加費</span>
                                        <span class="info-value" id="infoFee">無料</span>
                                    </div>
                                </div>
                            </div>

                            <div class="detail-description">
                                <h3>活動内容</h3>
                                <p id="detailDescription">
                                    朝の爽やかな空気の中、公園を約1時間ゆっくり歩きます。
                                    無理のないペースで、おしゃべりしながら楽しく歩きましょう。<br><br>
                                    初心者の方も大歓迎です。運動不足の解消や、朝の習慣づくりに最適です。
                                </p>
                            </div>

                            <button class="card-button success-button" onclick="joinActivity()" style="width: 100%;">
                                <i class="fas fa-user-plus"></i>
                                <span>参加を申し込む</span>
                            </button>

                            <div class="support-card">
                                <div style="text-align: center; margin-bottom: 12px;">
                                    <i class="fas fa-phone" style="font-size: 32px; color: #F59E0B;"></i>
                                </div>
                                <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 8px; text-align: center;">お問い合わせ</h3>
                                <p style="font-size: 16px; text-align: center; margin-bottom: 16px;">
                                    わからないことがあれば<br>
                                    お気軽にお電話ください
                                </p>
                                <button class="card-button" onclick="alert('電話：0982-XX-XXXX')" style="width: 100%;">
                                    <i class="fas fa-phone"></i>
                                    <span>電話する</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 活動報告タブ -->
                    <div id="tab-report" class="tab-content">
                        <div class="tab-inner">
                            <div class="report-card">
                                <img src="https://stat.ameba.jp/user_images/20140720/09/funaroom/8e/09/j/o0800045013008387592.jpg" class="report-image" alt="活動写真">
                                <div class="report-header">
                                    <div class="report-meta">
                                        <span class="report-author">スタッフ 山田</span>
                                        <span class="report-date">2日前</span>
                                    </div>
                                </div>
                                <div class="report-content">
                                    <p>今朝も気持ちよく歩きました！新しく参加された佐藤さんも、皆さんとすぐに打ち解けて楽しそうでした。桜が咲き始めていて、春を感じながらのウォーキングでした🌸</p>
                                </div>
                                <div class="report-stats">
                                    <span><i class="fas fa-heart"></i> 15</span>
                                    <span><i class="fas fa-comment"></i> 3</span>
                                </div>
                            </div>

                            <div class="report-card">
                                <div class="report-header">
                                    <div class="report-meta">
                                        <span class="report-author">スタッフ 田中</span>
                                        <span class="report-date">1週間前</span>
                                    </div>
                                </div>
                                <div class="report-content">
                                    <p>雨の予報でしたが、みんなの日頃の行いが良いのか、晴れました！今日は15名の参加で賑やかでした。来週は花見ウォーキングを計画中です。</p>
                                </div>
                                <div class="report-stats">
                                    <span><i class="fas fa-heart"></i> 23</span>
                                    <span><i class="fas fa-comment"></i> 5</span>
                                </div>
                            </div>

                            <div class="report-card">
                                <div class="report-header">
                                    <div class="report-meta">
                                        <span class="report-author">スタッフ 鈴木</span>
                                        <span class="report-date">2週間前</span>
                                    </div>
                                </div>
                                <div class="report-content">
                                    <p>今月の目標達成！全員で合計1000km歩きました！来月も楽しく健康づくりを続けていきましょう。新規メンバーも募集中です。</p>
                                </div>
                                <div class="report-stats">
                                    <span><i class="fas fa-heart"></i> 32</span>
                                    <span><i class="fas fa-comment"></i> 8</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 部活動タブコンテンツ終了 -->

        </div>
    </div>

    <script>
        // 状態管理
        let conversationHistory = [];
        let currentConversation = [];
        let dailyAnswers = {};
        let healthAnswers = {};
        let currentQuestion = 0;

        // 部活動データ
        const activityData = {
            walking: {
                category: '運動系',
                title: '朝の健康ウォーキング部',
                level: 'やさしい',
                place: '日向市中央公園',
                time: '毎週火・木 朝7:00〜8:00',
                members: '12名が参加中',
                fee: '無料',
                description: '朝の爽やかな空気の中、公園を約1時間ゆっくり歩きます。無理のないペースで、おしゃべりしながら楽しく歩きましょう。<br><br>初心者の方も大歓迎です。運動不足の解消や、朝の習慣づくりに最適です。',
                imageUrl: 'https://static.wixstatic.com/media/07cdbc_ffa8f4d3caa343ad96d08d1e33a3d943~mv2.jpg/v1/fill/w_828,h_624,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/IMG_2782_JPG.jpg'
            },
            yoga: {
                category: '運動系',
                title: 'ゆったりヨガ教室',
                level: 'やさしい',
                place: 'FUN・A・ROOMスタジオ',
                time: '毎週月・金 10:00〜11:00',
                members: '15名が参加中',
                fee: '月額 1,000円',
                description: 'ゆったりとした動きで、体をほぐしていきます。呼吸法も学べて、心身ともにリラックスできます。<br><br>椅子を使ったヨガも行うので、体が硬い方でも安心してご参加いただけます。',
                imageUrl: 'https://static.wixstatic.com/media/07cdbc_82a0984731614afdb20bb2b581c55d5d~mv2_d_3000_2000_s_2.jpg/v1/fill/w_562,h_374,al_c,q_80,usm_0.66_1.00_0.01/07cdbc_82a0984731614afdb20bb2b581c55d5d~mv2_d_3000_2000_s_2.jpg'
            },
            art: {
                category: '文化系',
                title: '絵手紙サークル',
                level: 'どなたでも',
                place: 'コミュニティセンター',
                time: '毎週水 13:00〜15:00',
                members: '8名が参加中',
                fee: '材料費 500円/回',
                description: '季節の花や風景を、絵手紙にして楽しみます。上手い下手は関係なく、思いを込めて描くことが大切です。<br><br>描いた作品は、お友達やご家族に送ることもできます。',
                imageUrl: ''
            }
        };

        // メインタブの切り替え
        function switchMainTab(tabName) {
            // タブボタンの状態を更新
            document.querySelectorAll('.top-nav-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // タブコンテンツの表示/非表示
            document.querySelectorAll('.main-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName + '-tab').classList.add('active');

            // 部活動タブに切り替えた時は一覧画面を表示
            if (tabName === 'activities') {
                document.getElementById('activities-list').classList.add('active');
                document.getElementById('activity-detail').classList.remove('active');
            }
        }

        // カテゴリーフィルター
        function filterCategory(button, category) {
            // タブの状態を更新
            document.querySelectorAll('.category-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            button.classList.add('active');

            // カードの表示/非表示
            const cards = document.querySelectorAll('.activity-card');
            cards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // 部活動詳細表示
        function showActivityDetail(activityId) {
            const activity = activityData[activityId];
            if (!activity) return;

            // 詳細情報を更新
            document.getElementById('detailTitle').textContent = activity.title;
            document.getElementById('detailBadge').textContent = activity.category;
            document.getElementById('infoLevel').textContent = activity.level;
            document.getElementById('infoPlace').textContent = activity.place;
            document.getElementById('infoTime').textContent = activity.time;
            document.getElementById('infoMembers').textContent = activity.members;
            document.getElementById('infoFee').textContent = activity.fee;
            document.getElementById('detailDescription').innerHTML = activity.description;

            // 画像の設定
            const detailImage = document.getElementById('detailImage');
            if (activity.imageUrl) {
                detailImage.style.backgroundImage = `url('${activity.imageUrl}')`;
            } else {
                detailImage.style.backgroundImage = '';
            }

            // 一覧を非表示にして詳細を表示
            document.getElementById('activities-list').classList.remove('active');
            document.getElementById('activity-detail').classList.add('active');
        }

        // 部活動一覧に戻る
        function backToActivitiesList() {
            document.getElementById('activity-detail').classList.remove('active');
            document.getElementById('activities-list').classList.add('active');
        }

        // 詳細タブ切り替え
        function switchDetailTab(button, tabName) {
            // タブボタンの状態を更新
            document.querySelectorAll('.detail-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            button.classList.add('active');

            // タブコンテンツの表示/非表示
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`tab-${tabName}`).classList.add('active');
        }

        // 参加申し込み
        function joinActivity() {
            alert('参加申し込みを受け付けました！\n\n担当者から連絡がありますので、しばらくお待ちください。');
        }

        // 初期メッセージを表示
        function init() {
            showWelcomeMessage();
            loadFooterState();
        }

        // フッターの開閉状態をトグル
        function toggleFooter() {
            const footer = document.getElementById('chatFooter');
            const content = document.getElementById('footerContent');
            const icon = document.getElementById('toggleIcon');

            const isCollapsed = content.classList.contains('collapsed');

            if (isCollapsed) {
                // 開く
                content.classList.remove('collapsed');
                footer.classList.remove('collapsed');
                icon.classList.add('expanded');
                localStorage.setItem('footerExpanded', 'true');
            } else {
                // 閉じる
                content.classList.add('collapsed');
                footer.classList.add('collapsed');
                icon.classList.remove('expanded');
                localStorage.setItem('footerExpanded', 'false');
            }
        }

        // フッターの状態を読み込み
        function loadFooterState() {
            const isExpanded = localStorage.getItem('footerExpanded');

            // デフォルトは閉じた状態
            if (isExpanded === null || isExpanded === 'false') {
                const content = document.getElementById('footerContent');
                const footer = document.getElementById('chatFooter');
                const icon = document.getElementById('toggleIcon');

                content.classList.add('collapsed');
                footer.classList.add('collapsed');
                icon.classList.remove('expanded');
            }
        }

        // ウェルカムメッセージ
        function showWelcomeMessage() {
            clearChat();
            addAssistantMessage(
                'おはようございます。今日はどのメニューから始めますか？大きなボタンから選べば大丈夫です。',
                `<div class="quick-actions">
                    <button class="quick-button" onclick="startDailyCheck()"><i class="fa-solid fa-pen-to-square"></i>今日の記録</button>
                    <button class="quick-button" onclick="showGameMenu()"><i class="fa-solid fa-gamepad"></i>健康ゲーム</button>
                    <button class="quick-button" onclick="showHealthCheck()"><i class="fa-solid fa-stethoscope"></i>月1健康診断</button>
                    <button class="quick-button" onclick="showActivities()"><i class="fa-solid fa-people-group"></i>部活動を見る</button>
                </div>`
            );
        }

        // チャットをクリア
        function clearChat() {
            const chatBody = document.getElementById('chatBody');
            chatBody.innerHTML = '';
            currentConversation = [];
        }

        // アシスタントメッセージを追加
        function addAssistantMessage(text, html = '') {
            const chatBody = document.getElementById('chatBody');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message assistant';
            messageDiv.innerHTML = `
                <div class="avatar">F</div>
                <div class="bubble">
                    ${text}
                    ${html}
                </div>
            `;
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;

            // 会話を記録
            currentConversation.push({
                type: 'assistant',
                content: text,
                timestamp: new Date()
            });
        }

        // ユーザーメッセージを追加
        function addUserMessage(text) {
            const chatBody = document.getElementById('chatBody');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            messageDiv.innerHTML = `
                <div class="avatar"><i class="fa-solid fa-user"></i></div>
                <div class="bubble">${text}</div>
            `;
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;

            // 会話を記録
            currentConversation.push({
                type: 'user',
                content: text,
                timestamp: new Date()
            });
        }

        // 今日の記録を開始
        function startDailyCheck() {
            addUserMessage('今日の記録をお願いします。');

            setTimeout(() => {
                dailyAnswers = {};
                currentQuestion = 0;
                askDailyQuestion(0);
            }, 500);
        }

        // 日々の質問
        const dailyQuestions = [
            {
                question: '体調はいかがですか?',
                options: [
                    { text: '元気', icon: 'fa-regular fa-face-smile' },
                    { text: 'いつも通り', icon: 'fa-regular fa-face-meh' },
                    { text: '疲れ気味', icon: 'fa-regular fa-face-frown' }
                ]
            },
            {
                question: '食事はしっかりとれましたか?',
                options: [
                    { text: 'はい', icon: null },
                    { text: 'いいえ', icon: null },
                    { text: '覚えていない', icon: null }
                ]
            },
            {
                question: '最後に今日の歩数を教えてください。',
                type: 'steps'
            }
        ];

        // 日々の質問を表示
        function askDailyQuestion(index) {
            if (index >= dailyQuestions.length) {
                completeDailyCheck();
                return;
            }

            const q = dailyQuestions[index];
            let html = '';

            if (q.type === 'steps') {
                html = `
                    <div class="card">
                        <div class="section-title">歩数入力</div>
                        <p>今日の歩数に近い数値を選んでください。</p>
                        <div class="action-row">
                            <button class="card-button secondary" onclick="answerDaily(${index}, '1,000歩未満')">1,000歩未満</button>
                            <button class="card-button secondary" onclick="answerDaily(${index}, '1,000〜4,999歩')">1,000〜4,999歩</button>
                            <button class="card-button secondary" onclick="answerDaily(${index}, '5,000〜7,999歩')">5,000〜7,999歩</button>
                            <button class="card-button secondary" onclick="answerDaily(${index}, '8,000歩以上')">8,000歩以上</button>
                        </div>
                        <div class="progress"><span>${index + 1} / ${dailyQuestions.length}</span> 問目です。</div>
                    </div>
                `;
            } else {
                const buttons = q.options.map(opt => {
                    const icon = opt.icon ? `<i class="${opt.icon}"></i>` : '';
                    return `<button class="quick-button" onclick="answerDaily(${index}, '${opt.text}')">${icon}${opt.text}</button>`;
                }).join('');

                html = `<div class="quick-actions">${buttons}</div>`;
            }

            const questionText = q.type === 'steps' ? q.question :
                `${q.question}${index < dailyQuestions.length - 1 ? ` (${index + 1}問目 / 全${dailyQuestions.length}問)` : ''}`;

            addAssistantMessage(questionText, html);
        }

        // 日々の質問への回答
        function answerDaily(index, answer) {
            dailyAnswers[`question${index}`] = answer;
            addUserMessage(answer);

            setTimeout(() => {
                askDailyQuestion(index + 1);
            }, 500);
        }

        // 日々のチェック完了
        function completeDailyCheck() {
            addAssistantMessage(
                '今日の記録が完了しました。毎日続けると体調の変化が分かりやすくなりますよ。',
                `<div class="quick-actions">
                    <button class="quick-button" onclick="startDailyCheck()"><i class="fa-solid fa-arrow-rotate-left"></i>もう一度記録</button>
                    <button class="quick-button" onclick="showActivities()"><i class="fa-solid fa-people-group"></i>部活動を見る</button>
                    <button class="quick-button" onclick="showWelcomeMessage()"><i class="fa-solid fa-house"></i>メニューへ戻る</button>
                </div>`
            );

            // 履歴に保存
            saveToHistory('今日の健康記録', '記録を完了しました');
        }

        // 健康ゲームメニュー
        function showGameMenu() {
            addUserMessage('健康ゲームを見せて。');

            setTimeout(() => {
                addAssistantMessage(
                    '楽しく身体を動かしましょう。やりたいゲームを選んでください。',
                    `<div class="card">
                        <h3>健康ゲームメニュー</h3>
                        <div class="tag"><i class="fa-solid fa-heart-pulse"></i>&nbsp;安全第一</div>
                        <p>それぞれのゲームは、開始前に周りの安全を確認してください。</p>
                        <div class="action-row">
                            <button class="card-button" onclick="startBalanceGame()"><i class="fa-solid fa-person-walking"></i>&nbsp;片足立ちチャレンジ</button>
                            <button class="card-button" onclick="startReactionGame()"><i class="fa-solid fa-bolt"></i>&nbsp;反応速度テスト</button>
                            <button class="card-button" onclick="startFingerRingTest()"><i class="fa-solid fa-ring"></i>&nbsp;指輪っかテスト</button>
                        </div>
                    </div>`
                );
            }, 500);
        }

        // 片足立ちゲーム
        function startBalanceGame() {
            addUserMessage('片足立ちチャレンジを始めます。');

            setTimeout(() => {
                addAssistantMessage(
                    '片足立ちチャレンジの準備ができました。',
                    `<div class="card">
                        <h3><i class="fa-solid fa-person-walking"></i> 片足立ちチャレンジ</h3>
                        <p>1. 周りに危ないものがないか確認しましょう。</p>
                        <p>2. 下のボタンを長押しして片足立ち、倒れそうになったら離してください。</p>
                        <div class="action-row">
                            <button class="card-button" onclick="alert('長押しで計測を開始します！')"><i class="fa-solid fa-play"></i>&nbsp;スタート</button>
                            <button class="card-button secondary" onclick="showGameMenu()"><i class="fa-solid fa-rotate-left"></i>&nbsp;戻る</button>
                        </div>
                    </div>`
                );
            }, 500);
        }

        // 反応速度ゲーム
        function startReactionGame() {
            addUserMessage('反応速度テストを始めます。');

            setTimeout(() => {
                addAssistantMessage(
                    '反応速度テストの準備ができました。',
                    `<div class="card">
                        <h3><i class="fa-solid fa-bolt"></i> 反応速度テスト</h3>
                        <p>画面が緑色に変わったら、できるだけ早くタップしてください。</p>
                        <div class="action-row">
                            <button class="card-button" onclick="alert('反応速度テストを開始します！')"><i class="fa-solid fa-play"></i>&nbsp;スタート</button>
                            <button class="card-button secondary" onclick="showGameMenu()"><i class="fa-solid fa-rotate-left"></i>&nbsp;戻る</button>
                        </div>
                    </div>`
                );
            }, 500);
        }

        // 指輪っかテスト
        function startFingerRingTest() {
            addUserMessage('指輪っかテストを始めます。');

            setTimeout(() => {
                addAssistantMessage(
                    '指輪っかテストの説明です。',
                    `<div class="card">
                        <h3><i class="fa-solid fa-ring"></i> 指輪っかテスト</h3>
                        <p>両手の親指と人差し指で輪を作り、ふくらはぎの一番太いところを囲みます。</p>
                        <p>結果を選んでください:</p>
                        <div class="action-row">
                            <button class="card-button secondary" onclick="fingerRingResult('届かない')">指が届かず輪が閉じない</button>
                            <button class="card-button secondary" onclick="fingerRingResult('ちょうど')">ちょうどふくらはぎに触れる</button>
                            <button class="card-button secondary" onclick="fingerRingResult('余る')">輪が余ってすき間ができる</button>
                        </div>
                    </div>`
                );
            }, 500);
        }

        // 指輪っかテスト結果
        function fingerRingResult(result) {
            addUserMessage(result);

            setTimeout(() => {
                let message = '';
                if (result === '届かない') {
                    message = '筋力は十分です。ふくらはぎがしっかりしている状態です。今の運動習慣を続けましょう。';
                } else if (result === 'ちょうど') {
                    message = 'やや注意が必要です。筋肉量が少し低下している可能性があります。軽い筋トレや散歩を取り入れましょう。';
                } else {
                    message = 'サルコペニアのリスクがあります。筋肉量がかなり低下している可能性があります。専門家に相談することをおすすめします。';
                }

                addAssistantMessage(
                    message,
                    `<div class="quick-actions">
                        <button class="quick-button" onclick="showGameMenu()"><i class="fa-solid fa-rotate-left"></i>ゲームメニューへ</button>
                        <button class="quick-button" onclick="showActivities()"><i class="fa-solid fa-people-group"></i>部活動を見る</button>
                        <button class="quick-button" onclick="showWelcomeMessage()"><i class="fa-solid fa-house"></i>メインメニューへ</button>
                    </div>`
                );

                saveToHistory('指輪っかテスト', `結果: ${result}`);
            }, 500);
        }

        // 月1健康診断
        function showHealthCheck() {
            addUserMessage('月1健康診断を見せて。');

            setTimeout(() => {
                addAssistantMessage(
                    '月1健康診断（フレイルチェック）もいつでもできます。準備はよろしいですか?',
                    `<div class="card">
                        <h3>フレイルチェック</h3>
                        <p>全5問です。所要時間は3分ほど。ゆっくり進めましょう。</p>
                        <div class="action-row">
                            <button class="card-button" onclick="startHealthCheck()"><i class="fa-solid fa-play"></i>&nbsp;診断を開始</button>
                            <button class="card-button secondary" onclick="showWelcomeMessage()"><i class="fa-solid fa-rotate-left"></i>&nbsp;戻る</button>
                        </div>
                    </div>`
                );
            }, 500);
        }

        // 健康診断開始
        function startHealthCheck() {
            addUserMessage('診断を始めます。');
            healthAnswers = {};

            setTimeout(() => {
                addAssistantMessage(
                    '最近、体重が減りましたか? (1 / 5問目)',
                    `<div class="quick-actions">
                        <button class="quick-button" onclick="answerHealth(1, 'はい')">はい</button>
                        <button class="quick-button" onclick="answerHealth(1, 'いいえ')">いいえ</button>
                        <button class="quick-button" onclick="answerHealth(1, 'わからない')">わからない</button>
                    </div>`
                );
            }, 500);
        }

        // 健康診断の質問
        const healthQuestions = [
            '最近、体重が減りましたか?',
            '食事を食べる時むせることがありますか?',
            '週に何回運動していますか?',
            '薬の飲み忘れはありますか?',
            '最近、気分が落ち込みますか?'
        ];

        // 健康診断への回答
        function answerHealth(questionNum, answer) {
            healthAnswers[`q${questionNum}`] = answer;
            addUserMessage(answer);

            setTimeout(() => {
                if (questionNum < 5) {
                    const nextQ = healthQuestions[questionNum];
                    addAssistantMessage(
                        `${nextQ} (${questionNum + 1} / 5問目)`,
                        `<div class="quick-actions">
                            <button class="quick-button" onclick="answerHealth(${questionNum + 1}, 'はい')">はい</button>
                            <button class="quick-button" onclick="answerHealth(${questionNum + 1}, 'いいえ')">いいえ</button>
                            <button class="quick-button" onclick="answerHealth(${questionNum + 1}, 'わからない')">わからない</button>
                        </div>`
                    );
                } else {
                    showHealthResult();
                }
            }, 500);
        }

        // 健康診断結果
        function showHealthResult() {
            addAssistantMessage(
                'フレイルチェックの結果です。',
                `<div class="card">
                    <h3>健康状態:良好</h3>
                    <p>引き続き今の習慣を大切にしましょう。水分補給と睡眠がポイントです。</p>
                    <div class="action-row">
                        <button class="card-button" onclick="alert('結果を共有します')"><i class="fa-solid fa-share"></i>&nbsp;結果を共有</button>
                        <button class="card-button secondary" onclick="showActivities()"><i class="fa-solid fa-people-group"></i>&nbsp;部活動を見る</button>
                        <button class="card-button secondary" onclick="showWelcomeMessage()"><i class="fa-solid fa-house"></i>&nbsp;ホームに戻る</button>
                    </div>
                </div>`
            );

            saveToHistory('フレイルチェック', '健康状態: 良好');
        }

        // 部活動を表示（タブ切り替え）
        function showActivities() {
            // 部活動タブに切り替え
            document.querySelectorAll('.top-nav-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.top-nav-button')[1].classList.add('active'); // 部活動一覧ボタン

            document.querySelectorAll('.main-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById('activities-tab').classList.add('active');

            // 一覧画面を表示
            document.getElementById('activities-list').classList.add('active');
            document.getElementById('activity-detail').classList.remove('active');
        }

        // 履歴を表示
        function showHistory() {
            if (conversationHistory.length === 0) {
                addAssistantMessage(
                    'まだ履歴がありません。',
                    `<div class="quick-actions">
                        <button class="quick-button" onclick="showWelcomeMessage()"><i class="fa-solid fa-house"></i>メインメニューへ</button>
                    </div>`
                );
                return;
            }

            let historyHtml = '<div class="history-section"><div class="history-title"><i class="fa-solid fa-clock-rotate-left"></i> 最近の記録</div>';

            conversationHistory.slice(-5).reverse().forEach((item, index) => {
                const date = new Date(item.timestamp);
                const dateStr = `${date.getMonth() + 1}/${date.getDate()} ${date.getHours()}:${String(date.getMinutes()).padStart(2, '0')}`;
                historyHtml += `
                    <div class="history-item" onclick="alert('${item.title}の詳細を表示')">
                        <div class="history-date">${dateStr}</div>
                        <div class="history-content">${item.title}: ${item.summary}</div>
                    </div>
                `;
            });

            historyHtml += '</div>';

            addAssistantMessage(
                '直近の記録です。気になる日付を選べます。',
                historyHtml + `<div class="quick-actions">
                    <button class="quick-button" onclick="showWelcomeMessage()"><i class="fa-solid fa-house"></i>メインメニューへ</button>
                </div>`
            );
        }

        // 履歴に保存
        function saveToHistory(title, summary) {
            conversationHistory.push({
                title: title,
                summary: summary,
                conversation: [...currentConversation],
                timestamp: new Date()
            });
        }

        // 初期化
        window.onload = init;
    </script>
</body>
</html>
